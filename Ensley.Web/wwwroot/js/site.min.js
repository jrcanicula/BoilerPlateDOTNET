function getPartialPage(n){$.ajax({url:"home/"+n,success:function(n){$("#main-content").html(n);$("#main-content").css("display","block");$("#contract-wizard").css("display","none");$("#divExit").css("display","none")}})}function activateNavigation(n){$(".dd-side").each(function(){this.id.toLowerCase()==n.toLowerCase()?$(this).addClass("active"):$(this).removeClass("active")})}function validateEmail(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n).toLowerCase())}function customCanReadEditor(n){var t=kendo.guid();$('<input class="k-checkbox" id="'+t+'" type="checkbox" name="canRead" data-type="boolean" data-bind="checked:canRead">').appendTo(n);$('<label class="k-checkbox-label" for="'+t+'">&#8203;<\/label>').appendTo(n)}function customCanWriteEditor(n){var t=kendo.guid();$('<input class="k-checkbox" id="'+t+'" type="checkbox" name="canWrite" data-type="boolean" data-bind="checked:canWrite">').appendTo(n);$('<label class="k-checkbox-label" for="'+t+'">&#8203;<\/label>').appendTo(n)}function customBoolEditor(n){var t=kendo.guid();$('<input class="k-checkbox" id="'+t+'" type="checkbox" name="Discontinued" data-type="boolean" data-bind="checked:Discontinued">').appendTo(n);$('<label class="k-checkbox-label" for="'+t+'">&#8203;<\/label>').appendTo(n)}function TryParseInt(n,t){var i=t;return n!==null&&n.length>0&&(isNaN(n)||(i=parseInt(n))),i}function TryParseInt(n,t){var i=t;return n!==null&&n.length>0&&(isNaN(n)||(i=parseInt(n))),i}function TryParseInt(n,t){var i=t;return n!==null&&n.length>0&&(isNaN(n)||(i=parseInt(n))),i}function validateEmail(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n).toLowerCase())}function countChecked(){checkState==="all"&&$(".bulk_action input[name='table_records']").iCheck("check");checkState==="none"&&$(".bulk_action input[name='table_records']").iCheck("uncheck");var n=$(".bulk_action input[name='table_records']:checked").length;n?($(".column-title").hide(),$(".bulk-actions").show(),$(".action-cnt").html(n+" Records Selected")):($(".column-title").show(),$(".bulk-actions").hide())}var navList=[],app,countryList,AccessManagementNS,RoleManagementNS,UserManagementNS,MyProfile,checkState;navList.push({Name:"dashboard"});navList.push({Name:"myprofile"});navList.push({Name:"contracts"});navList.push({Name:"users"});window.location.href.toLowerCase().indexOf("index")>-1&&(window.location="/#dashboard");app=$.sammy(function(){this.get("/home/index/#",function(){getPartialPage("dashboard")});this.get("#dashboard",function(){getPartialPage("dashboard")});this.get("#documents",function(){getPartialPage("documents")});this.get("#users",function(){getPartialPage("UserManagement")});this.get("#profile",function(){getPartialPage("Profile")})}).run("#dashboard");countryList=[{text:"Afghanistan",value:"Afghanistan"},{text:"Albania",value:"Albania"},{text:"Algeria",value:"Algeria"},{text:"Andorra",value:"Andorra"},{text:"Angola",value:"Angola"},{text:"Anguilla",value:"Anguilla"},{text:"Antigua & Barbuda",value:"Antigua & Barbuda"},{text:"Argentina",value:"Argentina"},{text:"Armenia",value:"Armenia"},{text:"Australia",value:"Australia"},{text:"Austria",value:"Austria"},{text:"Azerbaijan",value:"Azerbaijan"},{text:"Bahamas",value:"Bahamas"},{text:"Bahrain",value:"Bahrain"},{text:"Bangladesh",value:"Bangladesh"},{text:"Barbados",value:"Barbados"},{text:"Belarus",value:"Belarus"},{text:"Belgium",value:"Belgium"},{text:"Belize",value:"Belize"},{text:"Benin",value:"Benin"},{text:"Bermuda",value:"Bermuda"},{text:"Bhutan",value:"Bhutan"},{text:"Bolivia",value:"Bolivia"},{text:"Bosnia & Herzegovina",value:"Bosnia & Herzegovina"},{text:"Botswana",value:"Botswana"},{text:"Brazil",value:"Brazil"},{text:"Brunei Darussalam",value:"Brunei Darussalam"},{text:"Bulgaria",value:"Bulgaria"},{text:"Burkina Faso",value:"Burkina Faso"},{text:"Myanmar/Burma",value:"Myanmar/Burma"},{text:"Burundi",value:"Burundi"},{text:"Cambodia",value:"Cambodia"},{text:"Cameroon",value:"Cameroon"},{text:"Canada",value:"Canada"},{text:"Cape Verde",value:"Cape Verde"},{text:"Cayman Islands",value:"Cayman Islands"},{text:"Central African Republic",value:"Central African Republic"},{text:"Chad",value:"Chad"},{text:"Chile",value:"Chile"},{text:"China",value:"China"},{text:"Colombia",value:"Colombia"},{text:"Comoros",value:"Comoros"},{text:"Congo",value:"Congo"},{text:"Costa Rica",value:"Costa Rica"},{text:"Croatia",value:"Croatia"},{text:"Cuba",value:"Cuba"},{text:"Cyprus",value:"Cyprus"},{text:"Czech Republic",value:"Czech Republic"},{text:"Democratic Republic of the Congo",value:"Democratic Republic of the Congo"},{text:"Denmark",value:"Denmark"},{text:"Djibouti",value:"Djibouti"},{text:"Dominica",value:"Dominica"},{text:"Dominican Republic",value:"Dominican Republic"},{text:"Ecuador",value:"Ecuador"},{text:"Egypt",value:"Egypt"},{text:"El Salvador",value:"El Salvador"},{text:"Equatorial Guinea",value:"Equatorial Guinea"},{text:"Eritrea",value:"Eritrea"},{text:"Estonia",value:"Estonia"},{text:"Ethiopia",value:"Ethiopia"},{text:"Fiji",value:"Fiji"},{text:"Finland",value:"Finland"},{text:"France",value:"France"},{text:"French Guiana",value:"French Guiana"},{text:"Gabon",value:"Gabon"},{text:"Gambia",value:"Gambia"},{text:"Georgia",value:"Georgia"},{text:"Germany",value:"Germany"},{text:"Ghana",value:"Ghana"},{text:"Great Britain",value:"Great Britain"},{text:"Greece",value:"Greece"},{text:"Grenada",value:"Grenada"},{text:"Guadeloupe",value:"Guadeloupe"},{text:"Guatemala",value:"Guatemala"},{text:"Guinea",value:"Guinea"},{text:"Guinea-Bissau",value:"Guinea-Bissau"},{text:"Guyana",value:"Guyana"},{text:"Haiti",value:"Haiti"},{text:"Honduras",value:"Honduras"},{text:"Hungary",value:"Hungary"},{text:"Iceland",value:"Iceland"},{text:"India",value:"India"},{text:"Indonesia",value:"Indonesia"},{text:"Iran",value:"Iran"},{text:"Iraq",value:"Iraq"},{text:"Israel and the Occupied Territories",value:"Israel and the Occupied Territories"},{text:"Italy",value:"Italy"},{text:"Ivory Coast (Cote d'Ivoire)",value:"Ivory Coast (Cote d'Ivoire)"},{text:"Jamaica",value:"Jamaica"},{text:"Japan",value:"Japan"},{text:"Jordan",value:"Jordan"},{text:"Kazakhstan",value:"Kazakhstan"},{text:"Kenya",value:"Kenya"},{text:"Kosovo",value:"Kosovo"},{text:"Kuwait",value:"Kuwait"},{text:"Kyrgyz Republic (Kyrgyzstan)",value:"Kyrgyz Republic (Kyrgyzstan)"},{text:"Laos",value:"Laos"},{text:"Latvia",value:"Latvia"},{text:"Lebanon",value:"Lebanon"},{text:"Lesotho",value:"Lesotho"},{text:"Liberia",value:"Liberia"},{text:"Libya",value:"Libya"},{text:"Liechtenstein",value:"Liechtenstein"},{text:"Lithuania",value:"Lithuania"},{text:"Luxembourg",value:"Luxembourg"},{text:"Republic of Macedonia",value:"Republic of Macedonia"},{text:"Madagascar",value:"Madagascar"},{text:"Malawi",value:"Malawi"},{text:"Malaysia",value:"Malaysia"},{text:"Maldives",value:"Maldives"},{text:"Mali",value:"Mali"},{text:"Malta",value:"Malta"},{text:"Martinique",value:"Martinique"},{text:"Mauritania",value:"Mauritania"},{text:"Mauritius",value:"Mauritius"},{text:"Mayotte",value:"Mayotte"},{text:"Mexico",value:"Mexico"},{text:"Moldova, Republic of Monaco",value:"Moldova, Republic of Monaco"},{text:"Mongolia",value:"Mongolia"},{text:"Montenegro",value:"Montenegro"},{text:"Montserrat",value:"Montserrat"},{text:"Morocco",value:"Morocco"},{text:"Mozambique",value:"Mozambique"},{text:"Namibia",value:"Namibia"},{text:"Nepal",value:"Nepal"},{text:"Netherlands",value:"Netherlands"},{text:"New Zealand",value:"New Zealand"},{text:"Nicaragua",value:"Nicaragua"},{text:"Niger",value:"Niger"},{text:"Nigeria",value:"Nigeria"},{text:"Korea, Democratic Republic of (North Korea)",value:"Korea, Democratic Republic of (North Korea)"},{text:"Norway",value:"Norway"},{text:"Oman",value:"Oman"},{text:"Pacific Islands",value:"Pacific Islands"},{text:"Pakistan",value:"Pakistan"},{text:"Panama",value:"Panama"},{text:"Papua New Guinea",value:"Papua New Guinea"},{text:"Paraguay",value:"Paraguay"},{text:"Peru",value:"Peru"},{text:"Portugal",value:"Portugal"},{text:"Philippines",value:"Philippines"},{text:"Poland",value:"Poland"},{text:"Puerto Rico",value:"Puerto Rico"},{text:"Qatar",value:"Qatar"},{text:"Reunion",value:"Reunion"},{text:"Romania",value:"Romania"},{text:"Russian Federation",value:"Russian Federation"},{text:"Rwanda",value:"Rwanda"},{text:"Saint Kitts and Nevis",value:"Saint Kitts and Nevis"},{text:"Saint Lucia",value:"Saint Lucia"},{text:"Saint Vincent's & Grenadines",value:"Saint Vincent's & Grenadines"},{text:"Samoa",value:"Samoa"},{text:"Sao Tome and Principe",value:"Sao Tome and Principe"},{text:"Saudi Arabia",value:"Saudi Arabia"},{text:"Senegal",value:"Senegal"},{text:"Serbia",value:"Serbia"},{text:"Seychelles",value:"Seychelles"},{text:"Sierra Leone",value:"Sierra Leone"},{text:"Singapore",value:"Singapore"},{text:"Slovak Republic (Slovakia)",value:"Slovak Republic (Slovakia)"},{text:"Slovenia",value:"Slovenia"},{text:"Solomon Islands",value:"Solomon Islands"},{text:"Somalia",value:"Somalia"},{text:"South Africa",value:"South Africa"},{text:"Korea, Republic of (South Korea)",value:"Korea, Republic of (South Korea)"},{text:"South Sudan",value:"South Sudan"},{text:"Spain",value:"Spain"},{text:"Sri Lanka",value:"Sri Lanka"},{text:"Sudan",value:"Sudan"},{text:"Suriname",value:"Suriname"},{text:"Swaziland",value:"Swaziland"},{text:"Sweden",value:"Sweden"},{text:"Switzerland",value:"Switzerland"},{text:"Syria",value:"Syria"},{text:"Tajikistan",value:"Tajikistan"},{text:"Tanzania",value:"Tanzania"},{text:"Thailand",value:"Thailand"},{text:"Timor Leste",value:"Timor Leste"},{text:"Togo",value:"Togo"},{text:"Trinidad & Tobago",value:"Trinidad & Tobago"},{text:"Tunisia",value:"Tunisia"},{text:"Turkey",value:"Turkey"},{text:"Turkmenistan",value:"Turkmenistan"},{text:"Turks & Caicos Islands",value:"Turks & Caicos Islands"},{text:"Uganda",value:"Uganda"},{text:"Ukraine",value:"Ukraine"},{text:"United Arab Emirates",value:"United Arab Emirates"},{text:"United States of America (USA)",value:"United States of America (USA)"},{text:"Uruguay",value:"Uruguay"},{text:"Uzbekistan",value:"Uzbekistan"},{text:"Venezuela",value:"Venezuela"},{text:"Vietnam",value:"Vietnam"},{text:"Virgin Islands (UK)",value:"Virgin Islands (UK)"},{text:"Virgin Islands (US)",value:"Virgin Islands (US)"},{text:"Yemen",value:"Yemen"},{text:"Zambia",value:"Zambia"},{text:"Zimbabwe",value:"Zimbabwe"}];AccessManagementNS={};AccessManagementNS.ExcelURL=null;AccessManagementNS.AccessId=null;AccessManagementNS.init=function(){AccessManagementNS.hookup()};AccessManagementNS.onChange=function(){var n=this;n.select().length>=1?n.select().each(function(){var t=n.dataItem($(this));AccessManagementNS.AccessId=t.accessId;$("#access-edit-name").val(t.name);$("#access-edit-description").val(t.description);$("#access-edit-category").val(t.category);$("#edit-access-popup").prop("disabled",!1);$("#delete-access-popup").prop("disabled",!1)}):(AccessManagementNS.AccessId=null,$("#access-edit-name").val(null),$("#access-edit-description").val(null),$("#access-edit-category").val(null),$("#edit-access-popup").prop("disabled",!0),$("#delete-access-popup").prop("disabled",!0))};AccessManagementNS.populateAccess=function(){var n=new kendo.data.DataSource({transport:{read:{url:"api/access/list",dataType:"json"}},batch:!0,pageSize:10,schema:{model:{id:"accessId",fields:{accessId:{editable:!1,type:"guid"},name:{validation:{required:!0}},description:{validation:{required:!0}},category:{validation:{required:!0}},createdOn:{validation:{required:!0},hidden:!0}}}}});$("#access-grid").kendoGrid({dataSource:n,selectable:!0,pageable:!0,columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:500},{field:"description",title:"Description",width:400},{field:"category",title:"Category"},{field:"createdOn",title:"Created On",hidden:!0},],scrollable:!1,sortable:!0,change:AccessManagementNS.onChange,filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},pageable:!0})};AccessManagementNS.hookup=function(){var n=$("#form-access-create").kendoValidator().data("kendoValidator"),i=$(".status"),t=$("#form-access-edit").kendoValidator().data("kendoValidator"),i=$(".status");$("#add-access-popup").click(function(){$("#access-add-name").val(null);$("#access-add-description").val(null);$("#access-add-category").val(null);n.hideMessages()});$("#edit-access-popup").on("hidden.bs.modal",function(){t.hideMessages();n.hideMessages()});$("#access-edit-popup").on("hidden.bs.modal",function(){t.hideMessages();n.hideMessages()});$("#edit-access-dismiss").click(function(){var i=$("#access-grid").data("kendoGrid");i.clearSelection();t.hideMessages();n.hideMessages()});$("#access-edit-popup").on("hidden.bs.modal",function(){var i=$("#access-grid").data("kendoGrid");i.clearSelection();t.hideMessages();n.hideMessages()});$("form#form-access-create").submit(function(t){if(t.preventDefault(),n.validate()){var i={};i.Description=$("#access-add-description").val();i.Category=$("#access-add-category").val();i.AccessId=null;i.Name=$("#access-add-name").val();i.Name!=null&&i.Name.length>0?AccessManagementNS.createAccess(i):i.OrderNo==null?toastr.error("Order Number is required"):toastr.error("Name is required")}});$("form#form-access-edit").submit(function(n){if(n.preventDefault(),t.validate()){var i={};i.Description=$("#access-edit-description").val();i.Category=$("#access-edit-category").val();i.AccessId=AccessManagementNS.AccessId;i.Name=$("#access-edit-name").val();i.Name!=null&&i.Name.length>0?AccessManagementNS.updateAccess(i):toastr.error("Name is required")}});$("#delete-access").click(function(){AccessManagementNS.deleteAccess()});AccessManagementNS.populateAccess()};AccessManagementNS.createAccess=function(n){$.ajax({url:"api/access/",type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#save-access-dismiss").trigger("click"),$("#access-grid").data("kendoGrid").dataSource.read(),AccessManagementNS.selectFirstItem(),$("#access-add-name").val(null),$("#access-add-description").val(null),$("#access-add-category").val(null),toastr.success("Access successfully added")):toastr.error("Access already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};AccessManagementNS.updateAccess=function(n){$.ajax({url:"api/access/"+AccessManagementNS.AccessId,type:"PUT",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#edit-access-dismiss").trigger("click"),$("#access-grid").data("kendoGrid").dataSource.read(),$("#access-add-name").val(null),$("#access-add-description").val(null),$("#access-add-category").val(null),$("#edit-access-popup").prop("disabled",!0),$("#delete-access-popup").prop("disabled",!0),toastr.success("Access successfully updated!")):toastr.error("Access already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};AccessManagementNS.deleteAccess=function(){$.ajax({url:"api/access/"+AccessManagementNS.AccessId,type:"DELETE",contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#delete-access-dismiss").trigger("click"),$("#access-grid").data("kendoGrid").dataSource.read(),$("#access-edit-name").val(null),$("#access-edit-orderNo").val(null),$("#edit-access-popup").prop("disabled",!0),$("#delete-access-popup").prop("disabled",!0),toastr.success("Access successfully deleted!")):toastr.error("Error deleting access!")},error:function(){toastr.error("Something went wrong with the request!")}})};AccessManagementNS.selectFirstItem=function(){var n=$("#access-grid").data("kendoGrid");n.one("dataBound",function(t){setTimeout(function(){var i=t.sender.tbody.find("tr:first");n.select(i);i.trigger("click")},2e3)});n.dataSource.page(1)};RoleManagementNS={};RoleManagementNS.ExcelURL=null;RoleManagementNS.RoleId=null;RoleManagementNS.init=function(){RoleManagementNS.hookup()};RoleManagementNS.onChange=function(){var n=this;n.select().length>=1?n.select().each(function(){var t=n.dataItem($(this));RoleManagementNS.RoleId=t.roleId;$("#role-edit-name").val(t.name);$("#role-edit-description").val(t.description);document.getElementById("role-edit-isactive").checked=t.status==1?!0:!1;$("#edit-role-popup").prop("disabled",!1);$("#delete-role-popup").prop("disabled",!1)}):(RoleManagementNS.RoleId=null,$("#role-edit-name").val(null),$("#role-edit-description").val(null),$("#edit-role-popup").prop("disabled",!0),$("#delete-role-popup").prop("disabled",!0))};RoleManagementNS.populateRole=function(){var n=new kendo.data.DataSource({transport:{read:{url:"api/role/list",dataType:"json"}},batch:!0,pageSize:10,schema:{model:{id:"RoleId",fields:{roleId:{editable:!1,type:"guid"},name:{validation:{required:!0}},description:{validation:{required:!0},hidden:!0},createdOn:{validation:{required:!0}}}}}});$("#role-grid").kendoGrid({dataSource:n,selectable:!0,pageable:!0,columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:500},{field:"description",title:"Description",width:400},{field:"createdOn",title:"Created On",hidden:!0},],scrollable:!1,sortable:!0,change:RoleManagementNS.onChange,filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},pageable:!0})};RoleManagementNS.hookup=function(){var n=$("#form-role-create").kendoValidator().data("kendoValidator"),i=$(".status"),t=$("#form-role-edit").kendoValidator().data("kendoValidator"),i=$(".status");document.getElementById("role-add-isactive").checked=!0;$("#edit-role-dismiss").click(function(){var n=$("#role-grid").data("kendoGrid");n.clearSelection()});$("#role-edit-popup").on("hidden.bs.modal",function(){var n=$("#role-grid").data("kendoGrid");n.clearSelection()});$("#add-role-popup").click(function(){n.hideMessages();RoleManagementNS.RoleId=null;document.getElementById("role-add-isactive").checked=!0;$("#role-add-description").val(null);$("#role-add-name").val(null);RoleManagementNS.populateAddAccessMappings()});$("#edit-role-popup").click(function(){t.hideMessages();RoleManagementNS.populateEditAccessMappings()});$("form#form-role-create").submit(function(t){var i,f,u,r;if(t.preventDefault(),n.validate()){for(i={},i.RoleId=RoleManagementNS.RoleId,i.Status=$("#role-add-isactive").is(":checked")?1:0,i.Description=$("#role-add-description").val(),i.Name=$("#role-add-name").val(),f=[],u=$("#add-selected-access-mapping-grid").data().kendoGrid.dataSource,r=0;r<u._data.length;r++)f.push({AccessId:u._data[r].accessId,Name:u._data[r].name,Category:u._data[r].category});i.AccessMappingItems=f;i.Name!=null&&i.Name.length>0?RoleManagementNS.createRole(i):toastr.error("Name is required")}});$("form#form-role-edit").submit(function(n){var i,f,u,r;if(n.preventDefault(),t.validate()){for(i={},i.RoleId=RoleManagementNS.RoleId,i.Status=$("#role-edit-isactive").is(":checked")?1:0,i.Description=$("#role-edit-description").val(),i.Name=$("#role-edit-name").val(),f=[],u=$("#edit-selected-access-mapping-grid").data().kendoGrid.dataSource,r=0;r<u._data.length;r++)f.push({AccessId:u._data[r].accessId,Name:u._data[r].name,Category:u._data[r].category});i.AccessMappingItems=f;i.Name!=null&&i.Name.length>0?RoleManagementNS.updateRole(i):toastr.error("Name is required")}});$("#delete-role").click(function(){RoleManagementNS.deleteRole()});RoleManagementNS.populateRole()};RoleManagementNS.createRole=function(n){$.ajax({url:"api/role/",type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#save-role-dismiss").trigger("click"),$("#role-grid").data("kendoGrid").dataSource.read(),RoleManagementNS.selectFirstItem(),$("#role-add-description").val(null),$("#role-add-name").val(null),toastr.success("Role successfully added")):toastr.error("Role already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};RoleManagementNS.updateRole=function(n){$.ajax({url:"api/role/"+RoleManagementNS.RoleId,type:"PUT",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#edit-role-dismiss").trigger("click"),$("#role-grid").data("kendoGrid").dataSource.read(),$("#edit-role-popup").prop("disabled",!0),$("#delete-role-popup").prop("disabled",!0),toastr.success("Role successfully updated!")):toastr.error("Role already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};RoleManagementNS.deleteRole=function(){$.ajax({url:"api/role/"+RoleManagementNS.RoleId,type:"DELETE",contentType:"application/json; charset=utf-8",success:function(n){$("#delete-role-dismiss").trigger("click");$("#role-grid").data("kendoGrid").dataSource.read();n!=!1&&n!="false"?($("#role-edit-description").val(null),$("#role-edit-name").val(null),$("#edit-role-popup").prop("disabled",!0),$("#delete-role-popup").prop("disabled",!0),toastr.success("Role successfully deleted!")):toastr.error("Error in deleting role!")},error:function(){toastr.error("Something went wrong with the request!")}})};RoleManagementNS.selectFirstItem=function(){var n=$("#role-grid").data("kendoGrid");n.one("dataBound",function(t){setTimeout(function(){var i=t.sender.tbody.find("tr:first");n.select(i);i.trigger("click")},2e3)});n.dataSource.page(1)};RoleManagementNS.populateAddAccessMappings=function(){$.ajax({url:"api/access/availableMappingList",type:"GET"}).done(function(n){RoleManagementNS.initializeAddAccessMappingGrid(n)}).fail(function(){toastr.error("Something went wrong with the request!")})};RoleManagementNS.populateEditAccessMappings=function(){RoleManagementNS.initializeEditAccessMappingGrid()};RoleManagementNS.initializeAddAccessMappingGrid=function(n){var i=$("#add-available-access-mapping-grid").kendoGrid({dataSource:n,columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:"50px"},{field:"category",title:"Category",width:"50px"},],selectable:"row",filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},scrollable:!0,sortable:!0}).data("kendoGrid"),t;i.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 100px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var t=i.dataSource.skip(),f=n.oldIndex+t,u=n.newIndex+t,e=i.dataSource.data(),r=i.dataSource.getByUid(n.item.data("uid"));i.dataSource.remove(r);i.dataSource.insert(u,r)}});t=$("#add-selected-access-mapping-grid").kendoGrid({dataSource:[],columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:"50px"},{field:"category",title:"Category",width:"50px"},],selectable:"row",filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},scrollable:!0,sortable:!0}).data("kendoGrid");t.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 200px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var i=t.dataSource.skip(),f=n.oldIndex+i,u=n.newIndex+i,e=t.dataSource.data(),r=t.dataSource.getByUid(n.item.data("uid"));t.dataSource.remove(r);t.dataSource.insert(u,r)}});$("#add-mapped-access-to-available").click(function(n){var t=$("#add-selected-access-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&currentSelection.each(function(n,i){var r=t.dataItem(i),u=$("#add-available-access-mapping-grid").data().kendoGrid.dataSource;u.add({accessId:r.accessId?r.accessId:null,name:r.name?r.name:null,category:r.category?r.category:null});t.dataSource.remove(r)});n.preventDefault()});$("#add-available-access-to-selected").click(function(n){var t=$("#add-available-access-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&t.select().each(function(){var n=t.dataItem($(this)),i=$("#add-selected-access-mapping-grid").data().kendoGrid.dataSource;i.add({accessId:n.accessId?n.accessId:null,name:n.name?n.name:null,category:n.category?n.category:null});t.dataSource.remove(n)});n.preventDefault()})};RoleManagementNS.initializeEditAccessMappingGrid=function(){var t=$("#edit-available-access-mapping-grid").kendoGrid({dataSource:{transport:{read:{url:"api/role/unmapped/"+RoleManagementNS.RoleId,dataType:"json"}}},columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:"50px"},{field:"category",title:"Category",width:"50px"},],filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},selectable:"row",sortable:!0}).data("kendoGrid"),n;t.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 100px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var i=t.dataSource.skip(),f=n.oldIndex+i,u=n.newIndex+i,e=t.dataSource.data(),r=t.dataSource.getByUid(n.item.data("uid"));t.dataSource.remove(r);t.dataSource.insert(u,r)}});n=$("#edit-selected-access-mapping-grid").kendoGrid({dataSource:{transport:{read:{url:"api/role/mapped/"+RoleManagementNS.RoleId,dataType:"json"}}},columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:"50px"},{field:"category",title:"Category",width:"50px"},],selectable:"row",selectable:"row",filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},scrollable:!0,sortable:!0}).data("kendoGrid");n.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 200px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(t){var i=n.dataSource.skip(),f=t.oldIndex+i,u=t.newIndex+i,e=n.dataSource.data(),r=n.dataSource.getByUid(t.item.data("uid"));n.dataSource.remove(r);n.dataSource.insert(u,r)}});$("#edit-mapped-access-to-available").click(function(n){var t=$("#edit-selected-access-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&currentSelection.each(function(n,i){var r=t.dataItem(i),u=$("#edit-available-access-mapping-grid").data().kendoGrid.dataSource;u.add({accessId:r.accessId,name:r.name,category:r.category});t.dataSource.remove(r)});n.preventDefault()});$("#edit-available-access-to-selected").click(function(n){var t=$("#edit-available-access-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&t.select().each(function(){var n=t.dataItem($(this)),i=$("#edit-selected-access-mapping-grid").data().kendoGrid.dataSource;i.add({accessId:n.accessId?n.accessId:null,name:n.name?n.name:null,category:n.category});t.dataSource.remove(n)});n.preventDefault()})};UserManagementNS={};UserManagementNS.ExcelURL=null;UserManagementNS.UserInfoId=null;UserManagementNS.init=function(){UserManagementNS.hookup();$("h3#page-title").text("User Management");$("#user-edit-country").kendoComboBox({dataTextField:"text",dataValueField:"value",change:function(n){var t=n.sender;t.value()&&t.select()===-1&&t.value("")},dataSource:countryList,suggest:!0});$("#user-add-country").kendoComboBox({dataTextField:"text",dataValueField:"value",change:function(n){var t=n.sender;t.value()&&t.select()===-1&&t.value("")},dataSource:countryList,suggest:!0})};UserManagementNS.onChange=function(){var n=this;n.select().length>=1?n.select().each(function(){var t=n.dataItem($(this)),i;UserManagementNS.UserInfoId=t.userInfoId;$("#user-edit-firstname").val(t.firstName);$("#user-edit-lastname").val(t.lastName);$("#user-edit-email").val(t.email);$("#user-edit-address").val(t.address);$("#user-edit-companyid").val(t.companyId);$("#user-edit-position").val(t.position);$("#user-edit-contactno").val(t.contactNo);i=$("#user-edit-country").data("kendoComboBox");i.value(t.country);$("#user-edit-timezone").val(t.timezone);document.getElementById("user-edit-isactive").checked=t.status===1?!0:!1;$("#edit-user-popup").prop("disabled",!1);$("#delete-user-popup").prop("disabled",!1)}):(UserManagementNS.UserInfoId=null,$("#user-edit-firstname").val(null),$("#user-edit-lastname").val(null),$("#user-edit-email").val(null),$("#user-edit-address").val(null),$("#user-edit-company").val(null),$("#user-edit-position").val(null),$("#user-edit-contactno").val(null),$("#user-edit-country").val(null),$("#user-edit-timezone").val(null),$("#edit-user-popup").prop("disabled",!0),$("#delete-user-popup").prop("disabled",!0))};UserManagementNS.populateUser=function(){var n=new kendo.data.DataSource({transport:{read:{url:"api/userinfo/list",dataType:"json"}},batch:!0,pageSize:10,schema:{model:{id:"UserInfoId",fields:{userInfoId:{editable:!1,type:"guid"},lastName:{type:"string"},firstName:{type:"string"},email:{type:"string"},position:{type:"string"},contactNo:{type:"string"},country:{type:"string"},status:{type:"int"},address:{type:"string"},position:{type:"string"},companyId:{type:"guid"},timezone:{type:"string"}}}}});$("#user-grid").kendoGrid({dataSource:n,selectable:!0,pageable:!0,columns:[{field:"userInfoId",title:"UserInfoId",hidden:!0},{field:"firstName",title:"First Name"},{field:"lastName",title:"Last Name"},{field:"email",title:"Email"},{field:"position",title:"Position"},{field:"contactNo",title:"Contact Number"}],scrollable:!1,sortable:!0,change:UserManagementNS.onChange,filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},pageable:!0})};UserManagementNS.hookup=function(){var n=$("#form-user-create").kendoValidator().data("kendoValidator"),i=$(".status"),t=$("#form-user-edit").kendoValidator().data("kendoValidator"),i=$(".status");document.getElementById("user-add-isactive").checked=!0;$("#add-user-popup").click(function(){UserManagementNS.populateAddRoleMappings();n.hideMessages();$("#user-add-firstname").val(null);$("#user-add-lastname").val(null);$("#user-add-email").val(null);$("#user-add-address").val(null);$("#user-add-companyid").val($("#user-add-companyid option:first").val());$("#user-add-position").val(null);$("#user-add-contactno").val(null);$("#user-add-country").val(null);$("#user-add-timezone").val(null);document.getElementById("user-add-isactive").checked=!0});$("#edit-user-popup").click(function(){t.hideMessages();UserManagementNS.populateEditRoleMappings()});$("#edit-user-dismiss").click(function(){var n=$("#user-grid").data("kendoGrid");n.clearSelection()});$("#user-edit-popup").on("hidden.bs.modal",function(){var n=$("#user-grid").data("kendoGrid");n.clearSelection()});$("form#form-user-create").submit(function(t){var i,u,f,r;if(t.preventDefault(),n.validate()){for(i={},i.FirstName=$("#user-add-firstname").val(),i.LastName=$("#user-add-lastname").val(),i.Email=$("#user-add-email").val(),i.Address=$("#user-add-address").val(),i.Position=$("#user-add-position").val(),i.CompanyId=$("#user-add-companyid").val(),i.ContactNo=$("#user-add-contactno").val(),i.Country=$("#user-add-country").val(),i.Status=$("#user-add-isactive").is(":checked")?1:0,i.Timezone=null,u=[],f=$("#add-selected-role-mapping-grid").data().kendoGrid.dataSource,r=0;r<f._data.length;r++)u.push({RoleId:f._data[r].roleId,Name:f._data[r].name});i.RoleMappingItems=u;i.FirstName!=null&&i.FirstName.length>0&&u.length>=1&&validateEmail(i.Email)?UserManagementNS.createUser(i):i.LastName==null?toastr.error("Lastname is required"):validateEmail(i.Email)?i.RoleMappingItems.length<1?toastr.error("Role is required"):toastr.error("Firstname is required"):toastr.error("Not a valid email")}});$("form#form-user-edit").submit(function(n){var i,u,f,r;if(n.preventDefault(),t.validate()){for(i={},i.FirstName=$("#user-edit-firstname").val(),i.LastName=$("#user-edit-lastname").val(),i.Email=$("#user-edit-email").val(),i.Address=$("#user-edit-address").val(),i.Position=$("#user-edit-position").val(),i.CompanyId=$("#user-edit-companyid").val(),i.ContactNo=$("#user-edit-contactno").val(),i.Country=$("#user-edit-country").val(),i.Status=$("#user-edit-isactive").is(":checked")?1:0,i.Timezone=null,i.UserInfoId=UserManagementNS.UserInfoId,u=[],f=$("#edit-selected-role-mapping-grid").data().kendoGrid.dataSource,r=0;r<f._data.length;r++)u.push({RoleId:f._data[r].roleId,Name:f._data[r].name});i.RoleMappingItems=u;i.FirstName!=null&&i.FirstName.length>0&&u.length>=1&&validateEmail(i.Email)?UserManagementNS.updateUser(i):i.LastName==null?toastr.error("Lastname is required"):validateEmail(i.Email)?i.RoleMappingItems.length<1?toastr.error("Role is required"):toastr.error("Firstname is required"):toastr.error("Not a valid email")}});$("#delete-user").click(function(){UserManagementNS.deleteUser()});UserManagementNS.populateUser();$.ajax({url:"api/vendor/items",type:"GET",contentType:"application/json; charset=utf-8",success:function(n){for(var t=0;t<n.length;t++)$("#user-edit-companyid").append($("<option><\/option>").attr("value",n[t].vendorId).text(n[t].name)),$("#user-add-companyid").append($("<option><\/option>").attr("value",n[t].vendorId).text(n[t].name))},error:function(){toastr.error("Something went wrong with the request")}})};UserManagementNS.createUser=function(n){$.ajax({url:"api/userinfo/",type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#save-user-dismiss").trigger("click"),$("#user-grid").data("kendoGrid").dataSource.read(),UserManagementNS.selectFirstItem(),$("#user-add-firstname").val(null),$("#user-add-lastname").val(null),$("#user-add-email").val(null),$("#user-add-address").val(null),$("#user-add-companyid").val(null),$("#user-add-position").val(null),$("#user-add-contactno").val(null),$("#user-add-country").val(null),$("#user-add-timezone").val(null),document.getElementById("user-edit-isactive").checked=!0,toastr.success("User successfully added")):toastr.error("User already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};UserManagementNS.updateUser=function(n){$.ajax({url:"api/userinfo/"+UserManagementNS.UserInfoId,type:"PUT",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#edit-user-dismiss").trigger("click"),$("#user-grid").data("kendoGrid").dataSource.read(),$("#user-edit-firstname").val(null),$("#user-edit-lastname").val(null),$("#user-edit-email").val(null),$("#user-edit-address").val(null),$("#user-edit-company").val(null),$("#user-edit-position").val(null),$("#user-edit-contactno").val(null),$("#user-edit-country").val(null),$("#user-edit-timezone").val(null),$("#user-edit-companyid").val(null),document.getElementById("user-edit-isactive").checked=!0,$("#edit-user-popup").prop("disabled",!0),$("#delete-user-popup").prop("disabled",!0),toastr.success("User successfully updated!")):toastr.error("User already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};UserManagementNS.deleteUser=function(){$.ajax({url:"api/userinfo/"+UserManagementNS.UserInfoId,type:"DELETE",contentType:"application/json; charset=utf-8",success:function(n){$("#delete-user-dismiss").trigger("click");n==!1?toastr.success("Error in deleting user"):($("#user-grid").data("kendoGrid").dataSource.read(),$("#user-edit-firstname").val(null),$("#user-edit-lastname").val(null),$("#user-edit-email").val(null),$("#user-edit-address").val(null),$("#user-edit-company").val(null),$("#user-edit-position").val(null),$("#user-edit-contactno").val(null),$("#user-edit-country").val(null),$("#user-edit-timezone").val(null),$("#user-edit-companyid").val(null),$("#edit-user-popup").prop("disabled",!0),$("#delete-user-popup").prop("disabled",!0));toastr.success("User successfully deleted!")},error:function(){toastr.error("Something went wrong with the request!")}})};UserManagementNS.selectFirstItem=function(){var n=$("#user-grid").data("kendoGrid");n.one("dataBound",function(t){setTimeout(function(){var i=t.sender.tbody.find("tr:first");n.select(i);i.trigger("click")},2e3)});n.dataSource.page(1)};UserManagementNS.populateAddRoleMappings=function(){$.ajax({url:"api/role/availableMappingList",type:"GET"}).done(function(n){UserManagementNS.initializeAddRoleMappingGrid(n)}).fail(function(){toastr.error("Something went wrong with the request!")})};UserManagementNS.populateEditRoleMappings=function(){UserManagementNS.initializeEditRoleMappingGrid(null)};UserManagementNS.initializeAddRoleMappingGrid=function(n){var i=$("#add-available-role-mapping-grid").kendoGrid({dataSource:n,columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:"50px"},],selectable:"row"}).data("kendoGrid"),t;i.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 100px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var t=i.dataSource.skip(),f=n.oldIndex+t,u=n.newIndex+t,e=i.dataSource.data(),r=i.dataSource.getByUid(n.item.data("uid"));i.dataSource.remove(r);i.dataSource.insert(u,r)}});t=$("#add-selected-role-mapping-grid").kendoGrid({dataSource:[],columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:"50px"},],selectable:"row"}).data("kendoGrid");t.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 200px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var i=t.dataSource.skip(),f=n.oldIndex+i,u=n.newIndex+i,e=t.dataSource.data(),r=t.dataSource.getByUid(n.item.data("uid"));t.dataSource.remove(r);t.dataSource.insert(u,r)}});$("#add-mapped-role-to-available").click(function(n){var t=$("#add-selected-role-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&currentSelection.each(function(n,i){var r=t.dataItem(i),u=$("#add-available-role-mapping-grid").data().kendoGrid.dataSource;u.add({roleId:r.roleId?r.roleId:null,name:r.name?r.name:null});t.dataSource.remove(r)});n.preventDefault()});$("#add-available-role-to-selected").click(function(n){var t=$("#add-available-role-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&t.select().each(function(){var n=t.dataItem($(this)),i=$("#add-selected-role-mapping-grid").data().kendoGrid.dataSource;i.add({roleId:n.roleId?n.roleId:null,name:n.name?n.name:null});t.dataSource.remove(n)});n.preventDefault()})};UserManagementNS.initializeEditRoleMappingGrid=function(){var t=$("#edit-available-role-mapping-grid").kendoGrid({dataSource:{transport:{read:{url:"api/userinfo/unmapped/"+UserManagementNS.UserInfoId,dataType:"json"}}},columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:"50px"},],selectable:"row"}).data("kendoGrid"),n;t.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 100px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var i=t.dataSource.skip(),f=n.oldIndex+i,u=n.newIndex+i,e=t.dataSource.data(),r=t.dataSource.getByUid(n.item.data("uid"));t.dataSource.remove(r);t.dataSource.insert(u,r)}});n=$("#edit-selected-role-mapping-grid").kendoGrid({dataSource:{transport:{read:{url:"api/userinfo/mapped/"+UserManagementNS.UserInfoId,dataType:"json"}}},columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:"50px"},],selectable:"row"}).data("kendoGrid");n.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 200px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(t){var i=n.dataSource.skip(),f=t.oldIndex+i,u=t.newIndex+i,e=n.dataSource.data(),r=n.dataSource.getByUid(t.item.data("uid"));n.dataSource.remove(r);n.dataSource.insert(u,r)}});$("#edit-mapped-role-to-available").click(function(n){var t=$("#edit-selected-role-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&currentSelection.each(function(n,i){var r=t.dataItem(i),u=$("#edit-available-role-mapping-grid").data().kendoGrid.dataSource;u.add({roleId:r.roleId,name:r.name});t.dataSource.remove(r)});n.preventDefault()});$("#edit-available-role-to-selected").click(function(n){var t=$("#edit-available-role-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&t.select().each(function(){var n=t.dataItem($(this)),i=$("#edit-selected-role-mapping-grid").data().kendoGrid.dataSource;i.add({roleId:n.roleId?n.roleId:null,name:n.name?n.name:null});t.dataSource.remove(n)});n.preventDefault()})};MyProfile={};MyProfile.UserInfoId=null;MyProfile.Password=null;MyProfile.init=function(n){MyProfile.UserInfoId=n;MyProfile.hookup(n);$("h3#page-title").text("My Profile");$("#user-profile-edit-country").kendoComboBox({dataTextField:"text",dataValueField:"value",change:function(n){var t=n.sender;t.value()&&t.select()===-1&&t.value("")},dataSource:countryList,suggest:!0})};MyProfile.hookup=function(n){$.ajax({url:"api/userinfo/profile/"+n,type:"GET",cache:!1,contentType:"application/json; charset=utf-8",success:function(n){$("#user-profile-fullname").html(n.firstName+" "+n.lastName);$("#user-profile-email").html(n.email);$("#user-profile-edit-firstname").val(n.firstName);$("#user-profile-edit-lastname").val(n.lastName);$("#user-profile-edit-address").val(n.address);$("#user-profile-edit-contactno").val(n.contactNo);$("#user-profile-edit-email").val(n.email);var t=$("#user-profile-edit-country").data("kendoComboBox");t.value(n.country);$("#user-profile-edit-position").val(n.position);$("#user-profile-edit-password").val(n.password);MyProfile.Password=n.password;$("#user-profile-edit-password-confirm").val(n.password);$("#user-profile-company").html(n.company!=null?n.company:"Not available");$("#img-profile").attr("src",n.imageURL)},error:function(){toastr.error("Something went wrong with the request!")}});$("#img-profile").change(function(){MyProfile.ReadImage(this)});$("#edit-user-profile").click(function(){var n={};n.Address=$("#user-profile-edit-address").val();n.ContactNo=$("#user-profile-edit-contactno").val();n.ImageUrl=$("#img-profile").attr("src");n.Position=$("#user-profile-edit-position").val();n.Country=$("#user-profile-edit-country").val();n.UserInfoId=MyProfile.UserInfoId;MyProfile.updateProfile(n)});var t=$("#form-update-password").kendoValidator().data("kendoValidator"),i=$(".status");$("form#form-update-password").submit(function(n){if(n.preventDefault(),t.validate()){var i={};i.Password=$("#user-profile-edit-password").val();i.UserInfoId=MyProfile.UserInfoId;MyProfile.updatePassword(i)}})};MyProfile.updateProfile=function(n){$.ajax({type:"PUT",url:"api/userInfo/updateProfile/"+MyProfile.UserInfoId,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(){toastr.success("Profile updated");$("#display-picture").attr("src",n.ImageUrl)},error:function(){toastr.error("Unable to save user profile.")}})};MyProfile.ReadImage=function(n){var i,r,t;n.files&&n.files[0]&&(i=n.files[0].name.split(".").pop().toLowerCase(),r=["jpg","jpeg","png"].indexOf(i)>-1,r?(t=new FileReader,t.onload=function(n){$("#img-profile").attr("src",n.target.result);var t=n.target.result;imageURL=t.replace(" ","+")},t.readAsDataURL(n.files[0])):(toastr.error("Supported filetypes are only jpg, jpeg and png. Please upload files with these types only"),document.getElementById("picture-file").value=""))};MyProfile.updatePassword=function(n){$("#user-profile-edit-password").val()==$("#user-profile-edit-password-confirm").val()?$("#user-profile-edit-password").val()==MyProfile.Password?toastr.error("You did not change anything."):$.ajax({type:"PUT",url:"api/userInfo/updatePassword/"+MyProfile.UserInfoId,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(){toastr.success("Password successfully updated")},error:function(){toastr.error("Unable to save password.")}}):toastr.error("Password does not match")};var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_SCOL=$(".right_scol"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");(function(n,t){var i=function(n,t,i){var r;return function(){function e(){i||n.apply(u,f);r=null}var u=this,f=arguments;r?clearTimeout(r):i&&n.apply(u,f);r=setTimeout(e,t||100)}};jQuery.fn[t]=function(n){return n?this.bind("resize",i(n)):this.trigger(t)}})(jQuery,"smartresize");$(document).ready(function(){var n=function(){$RIGHT_SCOL.css("min-height",$(window).height());var n=$BODY.outerHeight(),r=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),t=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),i=n<t?t:n;i-=$NAV_MENU.height()+r;$RIGHT_SCOL.css("min-height",i)};$SIDEBAR_MENU.find("a").on("click",function(){var t=$(this).parent();t.is(".active")?(t.removeClass("active active-sm"),$("ul:first",t).slideUp(function(){n()})):(t.parent().is(".child_menu")||($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()),t.addClass("active"),$("ul:first",t).slideDown(function(){n()}))});$MENU_TOGGLE.on("click",function(){$BODY.hasClass("nav-md")?($SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")):($SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm"));$BODY.toggleClass("nav-md nav-sm");n()});$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page");$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){n()}).parent().addClass("active");$(window).smartresize(function(){n()});n();$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})});$(document).ready(function(){$(".collapse-link").on("click",function(){var n=$(this).closest(".x_panel"),i=$(this).find("i"),t=n.find(".x_content");n.attr("style")?t.slideToggle(200,function(){n.removeAttr("style")}):(t.slideToggle(200),n.css("height","auto"));i.toggleClass("fa-chevron-up fa-chevron-down")});$(".close-link").click(function(){var n=$(this).closest(".x_panel");n.remove()})});$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})});$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar();$(document).ready(function(){if($(".js-switch")[0]){var n=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));n.forEach(function(n){var t=new Switchery(n,{color:"#26B99A"})})}});$(document).ready(function(){$("input.flat")[0]&&$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})});$("table input").on("ifChecked",function(){checkState="";$(this).parent().parent().parent().addClass("selected");countChecked()});$("table input").on("ifUnchecked",function(){checkState="";$(this).parent().parent().parent().removeClass("selected");countChecked()});checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="";$(this).parent().parent().parent().addClass("selected");countChecked()});$(".bulk_action input").on("ifUnchecked",function(){checkState="";$(this).parent().parent().parent().removeClass("selected");countChecked()});$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all";countChecked()});$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none";countChecked()});$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200);$expand=$(this).find(">:first-child");$expand.text()=="+"?$expand.text("-"):$expand.text("+")})});typeof NProgress!="undefined"&&($(document).ready(function(){NProgress.start()}),$(window).load(function(){NProgress.done()}));