function getPartialPage(n){$.ajax({url:"home/"+n,success:function(n){$("#main-content").html(n);$("#main-content").css("display","block");$("#contract-wizard").css("display","none");$("#divExit").css("display","none");$("#divGlobalSearch").css("display","");$("#loading").fadeOut(500)}});activateNavigation(n)}function activateNavigation(n){$(".dd-side").each(function(){this.id.toLowerCase()==n.toLowerCase()?$(this).addClass("active"):$(this).removeClass("active")})}function detailInit(n){$("<div/>").appendTo(n.detailCell).kendoGrid({dataSource:{transport:{read:{url:"api/contract/contractList?vendorId="+n.data.vendorId,dataType:"json"}},serverPaging:!0,serverSorting:!0,serverFiltering:!0,pageSize:10},scrollable:!1,sortable:!0,pageable:!0,columns:[{field:"title",title:"Name",template:"<div'>#= title #<\/div>",width:"250px"},{field:"status",title:"Status",template:"<div style='text-align: center;'>#= status #<\/div>",width:"90px",headerAttributes:{style:"text-align: center"}},{field:"startDate",title:"Start Date",template:"<div'>#= kendo.toString(kendo.parseDate(startDate, 'yyyy-MM-dd'), 'MM/dd/yyyy') #<\/div>",width:"130px"},{field:"endDate",title:"End Date",template:"<div'>#= kendo.toString(kendo.parseDate(endDate, 'yyyy-MM-dd'), 'MM/dd/yyyy') #<\/div>",width:"130px"},{field:"noOfLicenses",title:"Quantity",template:"<div style='text-align: center;'>#= noOfLicenses #<\/div>",width:"50px",headerAttributes:{style:"text-align: center"}},{field:"noOfApp",title:"App",template:"<div style='text-align: center;'>#= noOfApp #<\/div>",width:"50px",headerAttributes:{style:"text-align: center"}},{field:"actions",title:"Actions",template:"<div style='text-align: center; cursor:pointer'><i onclick=\"ContractManagementNS.showEditContract('#= contractId #')\" class='fas fa-pencil-alt'><\/i><\/div>",headerAttributes:{style:"text-align: center"},width:"90px"}]})}function setError(n){$("#wizard").smartWizard("setError",{stepnum:n,iserror:!0})}function leaveAStepCallback(n,t){return validateSteps(t.toStep,t.fromStep)}function onFinishCallback(){}function validateSteps(n){return n==2&&ContractWizardNS.showPartialPage(2),!0}function validateEmail(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n).toLowerCase())}function customCanReadEditor(n){var t=kendo.guid();$('<input class="k-checkbox" id="'+t+'" type="checkbox" name="canRead" data-type="boolean" data-bind="checked:canRead">').appendTo(n);$('<label class="k-checkbox-label" for="'+t+'">&#8203;<\/label>').appendTo(n)}function customCanWriteEditor(n){var t=kendo.guid();$('<input class="k-checkbox" id="'+t+'" type="checkbox" name="canWrite" data-type="boolean" data-bind="checked:canWrite">').appendTo(n);$('<label class="k-checkbox-label" for="'+t+'">&#8203;<\/label>').appendTo(n)}function customBoolEditor(n){var t=kendo.guid();$('<input class="k-checkbox" id="'+t+'" type="checkbox" name="Discontinued" data-type="boolean" data-bind="checked:Discontinued">').appendTo(n);$('<label class="k-checkbox-label" for="'+t+'">&#8203;<\/label>').appendTo(n)}function TryParseInt(n,t){var i=t;return n!==null&&n.length>0&&(isNaN(n)||(i=parseInt(n))),i}function TryParseInt(n,t){var i=t;return n!==null&&n.length>0&&(isNaN(n)||(i=parseInt(n))),i}function TryParseInt(n,t){var i=t;return n!==null&&n.length>0&&(isNaN(n)||(i=parseInt(n))),i}function validateEmail(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n).toLowerCase())}function countChecked(){checkState==="all"&&$(".bulk_action input[name='table_records']").iCheck("check");checkState==="none"&&$(".bulk_action input[name='table_records']").iCheck("uncheck");var n=$(".bulk_action input[name='table_records']:checked").length;n?($(".column-title").hide(),$(".bulk-actions").show(),$(".action-cnt").html(n+" Records Selected")):($(".column-title").show(),$(".bulk-actions").hide())}var navList=[],app,ContractEditorNS,ContractGeneralInformationNS,ContractManagementNS,ContractWizardNS,countryList,AccessManagementNS,RoleManagementNS,UserManagementNS,MyProfile,VendorHistoryNS,VendorManagementNS,checkState;navList.push({Name:"dashboard"});navList.push({Name:"myprofile"});navList.push({Name:"contracts"});navList.push({Name:"users"});window.location.href.toLowerCase().indexOf("index")>-1&&(window.location="/#dashboard");app=$.sammy(function(){this.get("/home/index/#",function(){getPartialPage("dashboard")});this.get("#dashboard",function(){getPartialPage("dashboard")});this.get("#myprofile",function(){getPartialPage("myprofile")});this.get("#users",function(){getPartialPage("UserManagement")});this.get("#contracts",function(){getPartialPage("Contracts")});this.get("#profile",function(){getPartialPage("Profile")})}).run("#dashboard");ContractEditorNS={};ContractEditorNS.EditorValue="";ContractEditorNS.TagsData="";ContractEditorNS.Name="";ContractEditorNS.TemplateContractValue="";ContractEditorNS.init=function(){ContractEditorNS.initializeKendoEditorAndDnD()};ContractEditorNS.initializeKendoEditorAndDnD=function(){var n;$("#editor").kendoEditor({resizable:{content:!0,toolbar:!0},tools:["pdf","bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","subscript","superscript","tableWizard","createTable","addRowAbove","addRowBelow","addColumnLeft","addColumnRight","deleteRow","deleteColumn","viewHtml","formatting","cleanFormatting","fontName","fontSize","foreColor","backColor",],pdf:{fileName:"sampleContract.pdf",paperSize:"a4",margin:{bottom:20,left:20,right:20,top:20}}});$("#sortableListLeft").kendoSortable({connectWith:"#sortableListRight",placeholder:ContractEditorNS.placeholder,end:ContractEditorNS.onEndRemove});$("#sortableListRight").kendoSortable({connectWith:"#sortableListLeft",placeholder:ContractEditorNS.placeholder,end:ContractEditorNS.onEnd});$("#sortableListRight li").on("dblclick",".item",function(){});ContractEditorNS.GetTemplateContract();$("#drpContractTemplate").kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:ContractEditorNS.TemplateContractValue,index:0,change:ContractEditorNS.onChangeTemplate});n=$("#drpContractTemplate").val();ContractEditorNS.loadContentTemplateData(n);$("#btnCompareTemplate").click(function(){window.open("contract/contractversion","_blank")})};ContractEditorNS.GetTemplateContract=function(){ContractEditorNS.TemplateContractValue=[{text:"Enterprise Agreement",value:"1"},{text:"End User License Agreement",value:"2"}]};ContractEditorNS.onChangeTemplate=function(){var n=$("#drpContractTemplate").val();ContractEditorNS.loadContentTemplateData(n)};ContractEditorNS.placeholder=function(){return $("<li class='list-item' id='placeholder'>Drop Here!<\/li>")};ContractEditorNS.loadContentTemplateData=function(n){ContractEditorNS.loadTagsContent();ContractEditorNS.EditorValue=n==1?[{id:0,name:"Definition",value:'<h1 id="h0">Definitions<\/h1><p>Terms used in this agreement but not otherwise defined will have the definition provided in the Master Agreement. The following definitions also apply: <\/p><p>“Customer“ means the entity that has entered into this agreement with Microsoft and its Affiliates. <\/p><p>“Expiration Date“ means the date upon which the Enrollment expires. <\/p><p>“Enrolled Affiliate“ means an entity, either Customer or any one of Customer’s Affiliates, that has entered into an Enrollment under this agreement. <\/p><p>“Enrollment“ means the document that an Enrolled Affiliate submits under this agreement to place orders for Products and Services. <\/p><p>“Enterprise“ means Enrolled Affiliate and the Affiliates it chooses to include on its Enrollment. <\/p><p>“License“ means the right to download, install, access and use a Product. For certain Products, a License may be available on a fixed term or subscription basis (“Subscription License“). Licenses for Online Services will be considered Subscription Licenses. <\/p>',selected:!0},{id:1,name:"Terms",value:'<h1 id="h1">Terms and Conditions<\/h1><p>License Grant. Microsoft grants the Enterprise a non-exclusive, worldwide and limited right to download, install and use software Products, and to access and use the Online Services, each in the quantity ordered under an Enrollment. The rights granted are subject to the terms of this agreement, the Product Use Rights and the Product List. Microsoft reserves all rights not expressly granted in this agreement.<\/p>',selected:!0},{id:2,name:"The Law",value:"<h1>The Law<\/h1><p>Enterprise Agreements are governed by the Fair Work Act 2009. This Act sets out when and how Enterprise Agreements can be made, as well as the approval process that must be followed by the Fair Work Commission.<\/p>",selected:!0},{id:3,name:"Permitted",value:"<h1>Permitted Matters and Compulsory Inclusions<\/h1><p>Enterprise Agreements may only contain terms and conditions relating to ‘permitted matters’. These are generally things that are directly relevant to the employer/employee relationship such as: <br/>Rates of pay<br/>Hours of Work<br/>Leave entitlements<br/>Allowances<br/>Overtime and penalty rates, and<br/>Codes of Conduct<br/>Enterprise Agreements that contain terms and conditions that are not directly relevant to the employer/employee relationship - or which contain prohibited matters - will not be approved by the Commission and will have no legal effect.<\/p>",selected:!1},{id:4,name:"Bargaining",value:"<h1>Bargaining Representatives and ‘Good Faith’ Requirements<\/h1><p>If an employee belongs to a union and they choose not to appoint a different Bargaining Representative, the union will become their ‘default’ Bargaining Representative. The employee may still choose, at any time, to appoint a different Bargaining Representative if they wish.<\/p>",selected:!1}]:[{id:0,name:"Description",value:"<h1>1. DESCRIPTION OF APPLICATION<\/h1><p>(a) Mobile Check Deposit is a personal financial information management service that allows you to transmit and deposit checks and other financial instruments through use of the application provided by us through our online banking services using compatible and supported mobile phones and/or other compatible and supported wireless devices or network devices under your control (the “Service”).<\/p><p>(b) We reserve the right to modify the scope of the Services at any time. We reserve the right to refuse to make any transaction you request through the Service. You agree and understand that the Services may not be accessible or may have limited utility over some networks, such as while roaming.<\/p>",selected:!0},{id:1,name:"License",value:"<h1>2. LICENSE AND RESTRICTIONS<\/h1><p>(a) Subject to the terms of this Agreement, we hereby grant you a limited, personal, revocable, nonexclusive, nonsublicensable, nonassignable, nontransferable, nonresellable license and right to use the Application for the sole purpose of your use of the Service.<\/p><p> (b) You acknowledge and agree that any and all intellectual property rights (the “IP Rights”) in the Service and the Application are and shall remain the exclusive property of us. Nothing in this Agreement intends to or shall transfer any IP Rights to, or to vest any IP Rights in, you. You are only entitled to the limited use of the rights granted to you in this Agreement. You will not take any action to jeopardize, limit or interfere with the IP Rights. You acknowledge and agree that any unauthorized use of the IP Rights is a violation of this Agreement, as well as a violation of applicable intellectual property laws. You acknowledge and understand that all title and rights in and to any third party content that is not contained in the Service and Application, but may be accessed through the Service, is the property of the respective content owners and may be protected by applicable patent, copyright, or other intellectual property laws and treaties.<\/p>",selected:!0},{id:2,name:"Terms",value:'<h1>3. TERMS<\/h1><p>(a) Fees. For every check deposited through this service there will be a $1.00 mobile deposit fee. You are responsible for paying the fees for the use of the Service. Woodland Bank may change the fees for use of the Service at any time pursuant to the section titled "Acceptance of these Terms" above. You authorize Woodland Bank to deduct such fees from the same bank account as your mobile deposit. <\/p><p>(b) Eligible items. You agree to scan and deposit only "checks" as that term is defined in Federal Reserve Regulation CC ("Reg. CC"). When the image of the check transmitted to Woodland Bank is converted to an image for subsequent presentment and collection, it shall thereafter be deemed an "item" within the meaning of Articles 3 and 4 of the Uniform Commercial Code.<\/p>',selected:!0},{id:3,name:"Compliance",value:"<h1>4. COMPLIANCE AND INDEMNIFICATION<\/h1><p>(a) You agree to use the products and Service for lawful purposes and in compliance with all applicable laws, rules and regulations. You warrant that you will only  11/02/2015 transmit acceptable items for deposit and will handle the original items in accordance with applicable laws, rules and regulations. <\/p><p>(b) Any image of a check that you transmit using the Application must accurately and legibly provide all the information on the front and back of the check necessary to process the check, including any required endorsements. <\/p><p>(c) You are responsible for any loss or overdraft plus any applicable fees to your Account due to an item being returned.<\/p>",selected:!1},{id:4,name:"Termination",value:"<h1>5. TERMINATION<\/h1><p>(a) We may terminate this Agreement at any time, for any reason, and without notice. This Agreement shall remain in full force and effect unless and until it is terminated by us. Without limiting the foregoing, this Agreement may be terminated if you breach any term of this Agreement, if you use the Services for any unauthorized or illegal purposes or you use the Services in a manner inconsistent with the terms of your account agreement or any other agreement with us. <\/p><p>(b) Upon termination of this Agreement you: (a) acknowledge and agree that all licenses and rights to use the Service and Application shall terminate; (b) will cease any and all use of the Application; and <\/p><p>(c) will remove the Application from all computing devices, hard drives, networks, and other storage media in your possession or under your control.<\/p>",selected:!1},{id:5,name:"Legal",value:"<h1>6. LEGAL COMPLIANCE AND EXPORT RESTRICTIONS<\/h1><p>(a) You represent and warrant that: (1) you are not located in a country that is subject to a U.S. Government embargo, or that has been designated by the U.S. Government as a “terrorist supporting” country; and (2) you are not listed on any U.S. Government list of prohibited or restricted parties. You also acknowledge that the Service and Application may be subject to other U.S. and foreign laws and regulations governing the export of software by physical or electronic means. You  11/02/2015 agree to comply with all applicable US and foreign laws that apply to us as well as end-user, end-use, and destination restrictions imposed by U.S. and foreign governments.<\/p>",selected:!1},{id:6,name:"Warranty",value:"<h1>7. WARRANTY DISCLAIMER<\/h1><p>(a) WE CANNOT FORESEE OR ANTICIPATE ALL TECHNICAL OR OTHER DIFFICULTIES RELATED TO THE APPLICATION OR SERVICES. THESE DIFFICULTIES MAY RESULT IN LOSS OF DATA, PERSONALIZATION SETTINGS OR OTHER APPLICATION INTERRUPTIONS. WE ASSUME NO RESPONSIBILITY FOR ANY DISCLOSURE OF ACCOUNT INFORMATION TO NON-PARTIES, THE TIMELINESS, DELETION, MISDELIVERY OR FAILURE TO STORE ANY USER DATA, COMMUNICATIONS OR PERSONALIZATION SETTINGS IN CONNECTION WITH YOUR USE OF THE APPLICATION. <\/p><p>(b) WE ASSUME NO RESPONSIBILITY FOR THE OPERATION, SECURITY, FUNCTIONALITY OR AVAILABILITY OF ANY COMPUTING DEVICE OR NETWORK WHICH YOU UTILIZE TO ACCESS THE APPLICATION OR USE SERVICE.<\/p>",selected:!1}];var u=$("#sortableListLeft").empty(),f=$("#sortableListRight").empty(),t="",r="";for(i=0;i<ContractEditorNS.EditorValue.length;i++)ContractEditorNS.EditorValue[i].selected?r+="<li class='list-item' ondblclick='ContractEditorNS.loadContent(this)' id="+ContractEditorNS.EditorValue[i].id+">"+ContractEditorNS.EditorValue[i].name+"<\/li>":t+="<li class='list-item' ondblclick='ContractEditorNS.loadContent(this)' id="+ContractEditorNS.EditorValue[i].id+">"+ContractEditorNS.EditorValue[i].name+"<\/li>";u.append(t);f.append(r);ContractEditorNS.UpdateSectionValueBaseOnTags();ContractEditorNS.LoadEditor()};ContractEditorNS.loadTagsContent=function(){return ContractEditorNS.TagsData=[{id:0,text:"Customer",value:"Microsoft",type:"text",color:"#FF0000"},{id:1,text:"ExpiredDate",value:"4/26/2018",type:"date",color:"#FFFF00"},{id:2,text:"Affiliate",value:"affiliates",type:"text",color:"#7FB3D5"},{id:3,text:"Enrollment",value:"Enrolled",type:"text",color:"#45B39D"},{id:4,text:"Telno",value:"0987654321",type:"number",color:"#58D68D"}],ContractEditorNS.GetContentType(ContractEditorNS.TagsData),ContractEditorNS.TagsData};ContractEditorNS.GetContentType=function(n){var r='<table class="table table-bordered table-hover"><thead><tr><th>Tag Name<\/th><th>Values<\/th><\/tr><\/thead>',f,e;for(i=0;i<n.length;i++){var o=n[i].type,t=n[i].text,u="ContractEditorNS."+t;r+=o=="text"?"<tr><td draggable='true' ondragstart='ContractEditorNS.dragTags(event)' id="+n[i].id+"><span class='color-box' style=background-color:"+n[i].color+"><\/span>"+t+"<\/td><td><input id=txt"+n[i].id+" class='k-textbox' type='text' name=tag_"+n[i].id+" value="+n[i].value+" data-bind=value:"+u+",keyup: ContractEditorNS.handler><\/td><\/tr>":o=="date"?"<tr><td draggable='true' ondragstart='ContractEditorNS.dragTags(event)' id="+n[i].id+"><span class='color-box' style=background-color:"+n[i].color+"><\/span>"+t+"<\/td><td><input id=dt"+n[i].id+" name=tag_"+n[i].id+" value="+n[i].value+" data-bind=html:"+u+",valueUpdate:'afterkeydown'><\/td><\/tr>":"<tr><td draggable='true' ondragstart='ContractEditorNS.dragTags(event)' id="+n[i].id+"><span class='color-box' style=background-color:"+n[i].color+"><\/span>"+t+"<\/td><td><input id=num"+n[i].id+" class='k-textbox' type='text' name=tag_"+n[i].id+" value="+n[i].value+" data-bind=html:"+u+",valueUpdate:'afterkeydown'><\/td><\/tr>"}for(r+="<\/table>",$("#grdTags").append(r),j=0;j<n.length;j++)f=n[j].type,e="#dt"+n[j].id,f=="date"?$(e).kendoDateTimePicker({value:new Date,dateInput:!0}):f=="number"&&$(e).kendoNumericTextBox()};ContractEditorNS.UpdateSectionValueBaseOnTags=function(){for(var n=0;n<ContractEditorNS.TagsData.length;n++){var t=ContractEditorNS.TagsData[n].color,i=ContractEditorNS.TagsData[n].value,r=ContractEditorNS.TagsData[n].text;ContractEditorNS.AddBackgroundColorForSection(t,i,r)}};ContractEditorNS.AddBackgroundColorForSection=function(n,t,i){for(var u,f,r=0;r<ContractEditorNS.EditorValue.length;r++)u="ContractEditorNS."+i+"'",f="<span data-bind='text:"+u+" style='color:white;padding:1px 5px;background-color:"+n+";'>"+t+"<\/span>",ContractEditorNS.EditorValue[r].value=ContractEditorNS.EditorValue[r].value.replace(t,f)};ContractEditorNS.LoadEditor=function(){var t=$("#editor").data("kendoEditor"),n="";$("#sortableListRight li").each(function(i){$(this).attr("id")!="placeholder"&&i<$("#sortableListRight li").length&&(n+=ContractEditorNS.EditorValue[$(this).attr("id")].value);t.value(n)})};ContractEditorNS.dragTags=function(n){var f=$("#editorWrapper"),t=ContractEditorNS.TagsData[n.target.id].type,i="",r,u;i=t=="text"?"#txt"+n.target.id:t=="date"?"#dt"+n.target.id:"#num"+n.target.id;r="ContractEditorNS."+ContractEditorNS.TagsData[n.target.id].text+"'";u="&nbsp;<span data-bind='text:"+r+" style='color:white;padding:1px 5px;background-color:"+ContractEditorNS.TagsData[n.target.id].color+"';> "+$(i).val()+"<\/span>&nbsp;";n.dataTransfer.setData("text/html",u)};ContractEditorNS.onEnd=function(n){var r=$("#editor").data("kendoEditor"),t="",i=n.item[0].id,u=n.action;$("#sortableListRight li").each(function(){$(this).attr("id")=="placeholder"?t+=ContractEditorNS.EditorValue[i].value:i!=$(this).attr("id")&&(t+=ContractEditorNS.EditorValue[$(this).attr("id")].value);r.value(t)})};ContractEditorNS.onEndRemove=function(n){var i=$("#editor").data("kendoEditor"),t="",r=n.action;$("#sortableListRight li").each(function(n){$("#sortableListRight li").length==0&&(t="",i.value(""));r!="receive"&&($(this).attr("id")!="placeholder"&&n<parseInt($("#sortableListRight li").length)&&(t+=ContractEditorNS.EditorValue[parseInt($(this).attr("id"))].value),i.value(t))})};ContractEditorNS.loadContent=function(n){var r=n.id,t=n.textContent,i=$("#editorWrapper iframe").contents();$("#sortableListRight li").each(function(n){return n==0&&t==$(this)[0].textContent?(i.scrollTop(0),!1):t==$(this)[0].textContent?(i.scrollTop(($(this).innerHeight()+$(this).innerWidth())*r),!1):void 0})};ContractGeneralInformationNS={};ContractGeneralInformationNS.VendorId=null;ContractGeneralInformationNS.ContractId=null;ContractGeneralInformationNS.Mode=0;ContractGeneralInformationNS.InitializeControl=function(n,t){t!=null&&(ContractGeneralInformationNS.Mode=1);ContractGeneralInformationNS.ContractId=t;ContractGeneralInformationNS.VendorId=n;ContractGeneralInformationNS.LoadControls(n,t)};ContractGeneralInformationNS.resetCollapse=function(){$("#contract-details-collapse").removeClass("in");$("#contract-permission-collapse").removeClass("in");$("#contract-history-collapse").removeClass("in");$("#contract-alert-collapse").removeClass("in");$("#contractDetailsHeading").trigger("click")};ContractGeneralInformationNS.LoadControls=function(n,t){var i=[],r=$("#form-contract-general-information").kendoValidator().data("kendoValidator");i=t==null?new kendo.data.DataSource({schema:{model:{id:"userInfoId",fields:{userInfoId:{editable:!1,type:"guid"},canRead:{type:"number"},canWrite:{type:"number"}}}},pageSize:10}):new kendo.data.DataSource({schema:{model:{id:"userInfoId",fields:{userInfoId:{editable:!1,type:"guid"},canRead:{type:"number"},canWrite:{type:"number"}}}}});$("#contact-permission-grid").kendoGrid({dataSource:i,noRecords:!0,pageable:!0,sortable:!0,filterable:!0,scrollable:!1,dataBound:function(){$(".can-write").each(function(){$(this).unbind("click")});$(".can-read").each(function(){$(this).unbind("click")});$(".can-write").click(function(){var n=$(this).attr("item-guid");$(".can-write").each(function(){for(var i=$("#contact-permission-grid").data().kendoGrid.dataSource.view(),t=0;t<i.length;t++)i[t].uid.toLowerCase()==n.toLowerCase()&&(console.log(i[t]),i[t].canWrite==1?(i[t].set("canWrite",2),$(this).attr("data-value",2)):(i[t].set("canWrite",1),$(this).attr("data-value",1)))})});$(".can-read").click(function(){var n=$(this).attr("item-guid");$(".can-read").each(function(){for(var i=$("#contact-permission-grid").data().kendoGrid.dataSource.view(),t=0;t<i.length;t++)i[t].uid.toLowerCase()==n.toLowerCase()&&(console.log(i[t]),i[t].canRead==1?(i[t].set("canRead",2),$(this).attr("data-value",2)):(i[t].set("canRead",1),$(this).attr("data-value",1)))})})},messages:{noRecords:"No Permission Yet"},editable:"inline",columns:[{field:"name",title:"Name",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"userInfoId",title:"UserInfoId",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}},hidden:!0},{field:"canRead",title:"Can Read?",width:120,template:'<p class="text-center can-read"  style="cursor: pointer" item-guid="#:uid#" data-value="#:canRead#"><span><i class="#: canRead  == 1 ? "fa fa-check" : "fa fa-times" #" style=" color : #: canRead  == 1 ? "green" : "red" #"><\/i><\/span><\/p>',width:"50px"},{field:"canWrite",title:"Can Write?",width:120,template:'<p class="text-center can-write" style="cursor: pointer" item-guid="#:uid#" data-value="#:canWrite#"><span><i class="#: canWrite  == 1 ? "fa fa-check " : "fa fa-times" #" style=" color : #: canWrite  == 1 ? "green" : "red" #"><\/i><\/span><\/p>'},{field:"destroy",title:" ",width:"60px",template:"<center><span class='fas fa-trash' style='text-align: center; cursor:pointer' onclick=\"ContractGeneralInformationNS.deletePermissionRow('#= uid #')\" > <\/span> <\/center>"},]});$("#contractDetailsStartDate").kendoDatePicker();$("#contractDetailsEndDate").kendoDatePicker();$("#contractAlertWhenExpiredEmails").change(function(){$(this).val()?$("#isContractAlertWhenExpired").prop("disabled",!1):($("#isContractAlertWhenExpired").prop("checked",!1),$("#isContractAlertWhenExpired").attr("disabled",!0))});$("#contractAlertBeforeDaysExpiredEmails").change(function(){$(this).val()?$("#isContractAlertBeforeDaysExpired").prop("disabled",!1):($("#isContractAlertBeforeDaysExpired").prop("checked",!1),$("#isContractAlertBeforeDaysExpired").attr("disabled",!0))});$("#alertWhenNewContactAreIncludedEmails").change(function(){$(this).val()?$("#isAlertWhenNewContactAreIncluded").prop("disabled",!1):($("#isAlertWhenNewContactAreIncluded").prop("checked",!1),$("#isAlertWhenNewContactAreIncluded").attr("disabled",!0))});$.ajax({url:"api/vendor/"+n+"/users",type:"GET",contentType:"application/json; charset=utf-8",success:function(n){var t=$("#contract-permission-users").kendoComboBox({dataTextField:"fullName",dataValueField:"userInfoId",change:function(n){var t=n.sender;t.value()&&t.select()===-1&&t.value("")},dataSource:n,suggest:!0,select:function(n){var i,r;n.item&&(i=this.dataItem(n.item.index()),t.data("kendoComboBox").dataSource.remove(i),r=$("#contact-permission-grid").data().kendoGrid.dataSource,r.add({userInfoId:i.userInfoId,name:i.fullName,canRead:2,canWrite:2}))}})},error:function(){toastr.error("Something went wrong with the request")}});ContractGeneralInformationNS.Mode==1&&ContractGeneralInformationNS.fillUpForm(ContractGeneralInformationNS.ContractId);$("form#form-contract-general-information").submit(function(n){n.preventDefault();var t=$("#contact-permission-grid").data().kendoGrid.dataSource.view();r.validate()&&t.length>=1?ContractGeneralInformationNS.save():t.length<1&&toastr.error("Permission is Required")});ContractGeneralInformationNS.resetCollapse()};ContractGeneralInformationNS.fillUpForm=function(){};ContractGeneralInformationNS.deletePermissionRow=function(n){var i,t,u;if(confirm("Are you sure you want to delete this item?"))for(i=$("#contact-permission-grid").data().kendoGrid.dataSource.view(),t=0;t<i.length;t++)if(i[t].uid.toLowerCase()==n.toLowerCase()){var r=$("#contact-permission-grid").data("kendoGrid"),f=$("#contract-permission-users").getKendoComboBox(),e=f.dataSource;e.add({userInfoId:i[t].userInfoId,fullName:i[t].name});u=r.dataSource.getByUid(n.toLowerCase());r.dataSource.remove(u)}};ContractGeneralInformationNS.save=function(){for(var i,n,u=[],r=$("#contact-permission-grid").data().kendoGrid.dataSource.view(),f=0,t=0;t<r.length;t++)i={},i.CanRead=r[t].canRead,i.CanWrite=r[t].canWrite,i.UserInfoId=r[t].userInfoId,f++,u.push(i);if(f==0){toastr.error("Permission is required");return}n={};n.DetailInformation={};n.DetailInformation.Title=$("#contractPermissionTitle").val();n.DetailInformation.StartDate=$("#contractDetailsStartDate").val();n.DetailInformation.EndDate=$("#contractDetailsEndDate").val();n.DetailInformation.Description=$("#contractDetailsDescription").val();n.DetailInformation.RenewalType=$("#contactDetailsRenewalType").val();n.VendorId=ContractGeneralInformationNS.VendorId;n.Contractid="00000000-0000-0000-0000-000000000000";n.Alert={};n.Alert.IsContractAlertWhenExpired=$("#isContractAlertWhenExpired").is(":checked")?1:0;n.Alert.ContractAlertWhenExpiredEmails=$("#contractAlertWhenExpiredEmails").val();n.Alert.IsContractAlertBeforeDaysExpired=$("#isContractAlertBeforeDaysExpired").is(":checked")?1:0;n.Alert.ContractAlertBeforeDaysExpiredDays=$("#contractAlertBeforeDaysExpiredDays").val();n.Alert.ContractAlertBeforeDaysExpiredEmails=$("#contractAlertBeforeDaysExpiredEmails").val();n.Alert.IsAlertWhenNewContactAreIncluded=$("#isAlertWhenNewContactAreIncluded").is(":checked")?1:0;n.Alert.AlertWhenNewContactAreIncluded=$("#alertWhenNewContactAreIncludedEmails").val();n.Permissions=u};ContractManagementNS={};ContractManagementNS.Mode=0;ContractManagementNS.ContractID=null;ContractManagementNS.init=function(){ContractManagementNS.initializeControls();ContractManagementNS.showVendors()};ContractManagementNS.initializeControls=function(){$("h3#page-title").text("My Contracts")};ContractManagementNS.showVendors=function(){var n=$("#contractGrid").kendoGrid({dataSource:{transport:{read:{url:"api/contract/vendorList",dataType:"json"}},pageSize:20,serverPaging:!0,serverSorting:!0},sortable:!0,pageable:!0,filterable:!0,detailInit:detailInit,dataBound:function(){},columns:[{field:"vendorName",title:"Vendor Name",template:"<div>#= vendorName #<\/div>",width:"150px",filterable:{extra:!1,operators:{string:{contains:"Contains"}}}},{field:"noOfActiveContracts",title:"Active Contracts",template:"<div style='text-align: right;'>#: noOfActiveContracts #<\/div>",width:"135px",filterable:{extra:!1,operators:{string:{eq:"Is equal to",neq:"Is not equal to"}}}},{field:"noOfLicenses",title:"Licenses",template:"<div style='text-align: right;'>#= noOfLicenses #<\/div>",width:"90px",filterable:{extra:!1,operators:{string:{eq:"Is equal to",neq:"Is not equal to"}}}},{field:"vendorContact",title:"Vendor Contact",template:"<div>#= vendorContact #<\/div>",width:"180px",filterable:{extra:!1,operators:{string:{contains:"Contains"}}}},{field:"status",title:"Status",template:"<div style='text-align: center;'>#= status #<\/div>",headerAttributes:{style:"text-align: center"},width:"90px",filterable:{extra:!1,operators:{string:{contains:"Contains"}}}},{field:"noOfAmendments",title:"Amendments",template:"<div style='text-align: right;'>#= noOfAmendments #<\/div>",width:"100px",filterable:{extra:!1,operators:{string:{eq:"Is equal to",neq:"Is not equal to"}}}},{field:"noOfAlerts",title:"Alerts",template:"<center><div class='badge bg-red'>#= noOfAlerts #<\/div><\/center>",headerAttributes:{style:"text-align: center"},width:"90px",filterable:{extra:!1,operators:{string:{eq:"Is equal to",neq:"Is not equal to"}}}},{field:"actions",title:"Actions",template:"<div style='text-align:center'><span style='text-align: center; cursor:pointer'><i onclick=\"VendorManagementNS.showEditVendor('#= vendorId #')\" class='fas fa-pencil-alt'><\/i><\/span> &nbsp; &nbsp; &nbsp; <span style='text-align: center; cursor:pointer'><i onclick=\"ContractManagementNS.showAddContract('#= vendorId #',null)\" class='fas fa-plus'><\/i><\/span><\/div>",headerAttributes:{style:"text-align: center"},width:"90px"}]})};ContractManagementNS.showAddContract=function(n,t){ContractManagementNS.Mode=0;ContractWizardNS.initializeWizard(n,t);$("#contractModal").modal("show")};ContractManagementNS.showEditContract=function(n,t){ContractManagementNS.ContractID=t;ContractManagementNS.Mode=1;ContractWizardNS.initializeWizard(n,t);$("#contractModal").modal("show")};ContractManagementNS.save=function(){ContractManagementNS.Mode==1;toastr.success("Succesfully Saved")};ContractWizardNS={};ContractWizardNS.initializeWizard=function(n,t){$.ajax({url:"contract/ContractWizard",success:function(i){var r=$("#contract-wizard");r.empty();r.html(i).css("display","block");$("#main-content").css("display","none");$.ajax({url:"contract/ContractGeneralInfo/?vendorId="+n+"&contractId="+t,success:function(n){$("#step-1").html(n)}});$("#wizard").smartWizard({onLeaveStep:leaveAStepCallback,onFinish:onFinishCallback})}});ContractWizardNS.initializeControl()};ContractWizardNS.initializeControl=function(){$("#divExit").css("display","block");$("#divGlobalSearch").css("display","none");$(".buttonExit").click(function(){$("#contract-wizard").css("display","none");$("#main-content").css("display","block");$("#divExit").css("display","none");$("#divGlobalSearch").css("display","")})};ContractWizardNS.showPartialPage=function(n){var t="",i="",r="";n==1?(t="contract/ContractGeneralInfo/vendorId=",i="#step-1"):n==2&&(t="contract/ContractEditor",i="#step-2",r="?contractID"+ContractManagementNS.ContractID);$.ajax({url:t+r,success:function(n){$(i).html(n)}})};countryList=[{text:"Afghanistan",value:"Afghanistan"},{text:"Albania",value:"Albania"},{text:"Algeria",value:"Algeria"},{text:"Andorra",value:"Andorra"},{text:"Angola",value:"Angola"},{text:"Anguilla",value:"Anguilla"},{text:"Antigua & Barbuda",value:"Antigua & Barbuda"},{text:"Argentina",value:"Argentina"},{text:"Armenia",value:"Armenia"},{text:"Australia",value:"Australia"},{text:"Austria",value:"Austria"},{text:"Azerbaijan",value:"Azerbaijan"},{text:"Bahamas",value:"Bahamas"},{text:"Bahrain",value:"Bahrain"},{text:"Bangladesh",value:"Bangladesh"},{text:"Barbados",value:"Barbados"},{text:"Belarus",value:"Belarus"},{text:"Belgium",value:"Belgium"},{text:"Belize",value:"Belize"},{text:"Benin",value:"Benin"},{text:"Bermuda",value:"Bermuda"},{text:"Bhutan",value:"Bhutan"},{text:"Bolivia",value:"Bolivia"},{text:"Bosnia & Herzegovina",value:"Bosnia & Herzegovina"},{text:"Botswana",value:"Botswana"},{text:"Brazil",value:"Brazil"},{text:"Brunei Darussalam",value:"Brunei Darussalam"},{text:"Bulgaria",value:"Bulgaria"},{text:"Burkina Faso",value:"Burkina Faso"},{text:"Myanmar/Burma",value:"Myanmar/Burma"},{text:"Burundi",value:"Burundi"},{text:"Cambodia",value:"Cambodia"},{text:"Cameroon",value:"Cameroon"},{text:"Canada",value:"Canada"},{text:"Cape Verde",value:"Cape Verde"},{text:"Cayman Islands",value:"Cayman Islands"},{text:"Central African Republic",value:"Central African Republic"},{text:"Chad",value:"Chad"},{text:"Chile",value:"Chile"},{text:"China",value:"China"},{text:"Colombia",value:"Colombia"},{text:"Comoros",value:"Comoros"},{text:"Congo",value:"Congo"},{text:"Costa Rica",value:"Costa Rica"},{text:"Croatia",value:"Croatia"},{text:"Cuba",value:"Cuba"},{text:"Cyprus",value:"Cyprus"},{text:"Czech Republic",value:"Czech Republic"},{text:"Democratic Republic of the Congo",value:"Democratic Republic of the Congo"},{text:"Denmark",value:"Denmark"},{text:"Djibouti",value:"Djibouti"},{text:"Dominica",value:"Dominica"},{text:"Dominican Republic",value:"Dominican Republic"},{text:"Ecuador",value:"Ecuador"},{text:"Egypt",value:"Egypt"},{text:"El Salvador",value:"El Salvador"},{text:"Equatorial Guinea",value:"Equatorial Guinea"},{text:"Eritrea",value:"Eritrea"},{text:"Estonia",value:"Estonia"},{text:"Ethiopia",value:"Ethiopia"},{text:"Fiji",value:"Fiji"},{text:"Finland",value:"Finland"},{text:"France",value:"France"},{text:"French Guiana",value:"French Guiana"},{text:"Gabon",value:"Gabon"},{text:"Gambia",value:"Gambia"},{text:"Georgia",value:"Georgia"},{text:"Germany",value:"Germany"},{text:"Ghana",value:"Ghana"},{text:"Great Britain",value:"Great Britain"},{text:"Greece",value:"Greece"},{text:"Grenada",value:"Grenada"},{text:"Guadeloupe",value:"Guadeloupe"},{text:"Guatemala",value:"Guatemala"},{text:"Guinea",value:"Guinea"},{text:"Guinea-Bissau",value:"Guinea-Bissau"},{text:"Guyana",value:"Guyana"},{text:"Haiti",value:"Haiti"},{text:"Honduras",value:"Honduras"},{text:"Hungary",value:"Hungary"},{text:"Iceland",value:"Iceland"},{text:"India",value:"India"},{text:"Indonesia",value:"Indonesia"},{text:"Iran",value:"Iran"},{text:"Iraq",value:"Iraq"},{text:"Israel and the Occupied Territories",value:"Israel and the Occupied Territories"},{text:"Italy",value:"Italy"},{text:"Ivory Coast (Cote d'Ivoire)",value:"Ivory Coast (Cote d'Ivoire)"},{text:"Jamaica",value:"Jamaica"},{text:"Japan",value:"Japan"},{text:"Jordan",value:"Jordan"},{text:"Kazakhstan",value:"Kazakhstan"},{text:"Kenya",value:"Kenya"},{text:"Kosovo",value:"Kosovo"},{text:"Kuwait",value:"Kuwait"},{text:"Kyrgyz Republic (Kyrgyzstan)",value:"Kyrgyz Republic (Kyrgyzstan)"},{text:"Laos",value:"Laos"},{text:"Latvia",value:"Latvia"},{text:"Lebanon",value:"Lebanon"},{text:"Lesotho",value:"Lesotho"},{text:"Liberia",value:"Liberia"},{text:"Libya",value:"Libya"},{text:"Liechtenstein",value:"Liechtenstein"},{text:"Lithuania",value:"Lithuania"},{text:"Luxembourg",value:"Luxembourg"},{text:"Republic of Macedonia",value:"Republic of Macedonia"},{text:"Madagascar",value:"Madagascar"},{text:"Malawi",value:"Malawi"},{text:"Malaysia",value:"Malaysia"},{text:"Maldives",value:"Maldives"},{text:"Mali",value:"Mali"},{text:"Malta",value:"Malta"},{text:"Martinique",value:"Martinique"},{text:"Mauritania",value:"Mauritania"},{text:"Mauritius",value:"Mauritius"},{text:"Mayotte",value:"Mayotte"},{text:"Mexico",value:"Mexico"},{text:"Moldova, Republic of Monaco",value:"Moldova, Republic of Monaco"},{text:"Mongolia",value:"Mongolia"},{text:"Montenegro",value:"Montenegro"},{text:"Montserrat",value:"Montserrat"},{text:"Morocco",value:"Morocco"},{text:"Mozambique",value:"Mozambique"},{text:"Namibia",value:"Namibia"},{text:"Nepal",value:"Nepal"},{text:"Netherlands",value:"Netherlands"},{text:"New Zealand",value:"New Zealand"},{text:"Nicaragua",value:"Nicaragua"},{text:"Niger",value:"Niger"},{text:"Nigeria",value:"Nigeria"},{text:"Korea, Democratic Republic of (North Korea)",value:"Korea, Democratic Republic of (North Korea)"},{text:"Norway",value:"Norway"},{text:"Oman",value:"Oman"},{text:"Pacific Islands",value:"Pacific Islands"},{text:"Pakistan",value:"Pakistan"},{text:"Panama",value:"Panama"},{text:"Papua New Guinea",value:"Papua New Guinea"},{text:"Paraguay",value:"Paraguay"},{text:"Peru",value:"Peru"},{text:"Portugal",value:"Portugal"},{text:"Philippines",value:"Philippines"},{text:"Poland",value:"Poland"},{text:"Puerto Rico",value:"Puerto Rico"},{text:"Qatar",value:"Qatar"},{text:"Reunion",value:"Reunion"},{text:"Romania",value:"Romania"},{text:"Russian Federation",value:"Russian Federation"},{text:"Rwanda",value:"Rwanda"},{text:"Saint Kitts and Nevis",value:"Saint Kitts and Nevis"},{text:"Saint Lucia",value:"Saint Lucia"},{text:"Saint Vincent's & Grenadines",value:"Saint Vincent's & Grenadines"},{text:"Samoa",value:"Samoa"},{text:"Sao Tome and Principe",value:"Sao Tome and Principe"},{text:"Saudi Arabia",value:"Saudi Arabia"},{text:"Senegal",value:"Senegal"},{text:"Serbia",value:"Serbia"},{text:"Seychelles",value:"Seychelles"},{text:"Sierra Leone",value:"Sierra Leone"},{text:"Singapore",value:"Singapore"},{text:"Slovak Republic (Slovakia)",value:"Slovak Republic (Slovakia)"},{text:"Slovenia",value:"Slovenia"},{text:"Solomon Islands",value:"Solomon Islands"},{text:"Somalia",value:"Somalia"},{text:"South Africa",value:"South Africa"},{text:"Korea, Republic of (South Korea)",value:"Korea, Republic of (South Korea)"},{text:"South Sudan",value:"South Sudan"},{text:"Spain",value:"Spain"},{text:"Sri Lanka",value:"Sri Lanka"},{text:"Sudan",value:"Sudan"},{text:"Suriname",value:"Suriname"},{text:"Swaziland",value:"Swaziland"},{text:"Sweden",value:"Sweden"},{text:"Switzerland",value:"Switzerland"},{text:"Syria",value:"Syria"},{text:"Tajikistan",value:"Tajikistan"},{text:"Tanzania",value:"Tanzania"},{text:"Thailand",value:"Thailand"},{text:"Timor Leste",value:"Timor Leste"},{text:"Togo",value:"Togo"},{text:"Trinidad & Tobago",value:"Trinidad & Tobago"},{text:"Tunisia",value:"Tunisia"},{text:"Turkey",value:"Turkey"},{text:"Turkmenistan",value:"Turkmenistan"},{text:"Turks & Caicos Islands",value:"Turks & Caicos Islands"},{text:"Uganda",value:"Uganda"},{text:"Ukraine",value:"Ukraine"},{text:"United Arab Emirates",value:"United Arab Emirates"},{text:"United States of America (USA)",value:"United States of America (USA)"},{text:"Uruguay",value:"Uruguay"},{text:"Uzbekistan",value:"Uzbekistan"},{text:"Venezuela",value:"Venezuela"},{text:"Vietnam",value:"Vietnam"},{text:"Virgin Islands (UK)",value:"Virgin Islands (UK)"},{text:"Virgin Islands (US)",value:"Virgin Islands (US)"},{text:"Yemen",value:"Yemen"},{text:"Zambia",value:"Zambia"},{text:"Zimbabwe",value:"Zimbabwe"}];AccessManagementNS={};AccessManagementNS.ExcelURL=null;AccessManagementNS.AccessId=null;AccessManagementNS.init=function(){AccessManagementNS.hookup()};AccessManagementNS.onChange=function(){var n=this;n.select().length>=1?n.select().each(function(){var t=n.dataItem($(this));AccessManagementNS.AccessId=t.accessId;$("#access-edit-name").val(t.name);$("#access-edit-description").val(t.description);$("#access-edit-category").val(t.category);$("#edit-access-popup").prop("disabled",!1);$("#delete-access-popup").prop("disabled",!1)}):(AccessManagementNS.AccessId=null,$("#access-edit-name").val(null),$("#access-edit-description").val(null),$("#access-edit-category").val(null),$("#edit-access-popup").prop("disabled",!0),$("#delete-access-popup").prop("disabled",!0))};AccessManagementNS.populateAccess=function(){var n=new kendo.data.DataSource({transport:{read:{url:"api/access/list",dataType:"json"}},batch:!0,pageSize:10,schema:{model:{id:"accessId",fields:{accessId:{editable:!1,type:"guid"},name:{validation:{required:!0}},description:{validation:{required:!0}},category:{validation:{required:!0}},createdOn:{validation:{required:!0},hidden:!0}}}}});$("#access-grid").kendoGrid({dataSource:n,selectable:!0,pageable:!0,columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:500},{field:"description",title:"Description",width:400},{field:"category",title:"Category"},{field:"createdOn",title:"Created On",hidden:!0},],scrollable:!1,sortable:!0,change:AccessManagementNS.onChange,filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},pageable:!0})};AccessManagementNS.hookup=function(){var n=$("#form-access-create").kendoValidator().data("kendoValidator"),i=$(".status"),t=$("#form-access-edit").kendoValidator().data("kendoValidator"),i=$(".status");$("#add-access-popup").click(function(){$("#access-add-name").val(null);$("#access-add-description").val(null);$("#access-add-category").val(null);n.hideMessages()});$("#edit-access-popup").on("hidden.bs.modal",function(){t.hideMessages();n.hideMessages()});$("#access-edit-popup").on("hidden.bs.modal",function(){t.hideMessages();n.hideMessages()});$("#edit-access-dismiss").click(function(){var i=$("#access-grid").data("kendoGrid");i.clearSelection();t.hideMessages();n.hideMessages()});$("#access-edit-popup").on("hidden.bs.modal",function(){var i=$("#access-grid").data("kendoGrid");i.clearSelection();t.hideMessages();n.hideMessages()});$("form#form-access-create").submit(function(t){if(t.preventDefault(),n.validate()){var i={};i.Description=$("#access-add-description").val();i.Category=$("#access-add-category").val();i.AccessId=null;i.Name=$("#access-add-name").val();i.Name!=null&&i.Name.length>0?AccessManagementNS.createAccess(i):i.OrderNo==null?toastr.error("Order Number is required"):toastr.error("Name is required")}});$("form#form-access-edit").submit(function(n){if(n.preventDefault(),t.validate()){var i={};i.Description=$("#access-edit-description").val();i.Category=$("#access-edit-category").val();i.AccessId=AccessManagementNS.AccessId;i.Name=$("#access-edit-name").val();i.Name!=null&&i.Name.length>0?AccessManagementNS.updateAccess(i):toastr.error("Name is required")}});$("#delete-access").click(function(){AccessManagementNS.deleteAccess()});AccessManagementNS.populateAccess()};AccessManagementNS.createAccess=function(n){$.ajax({url:"api/access/",type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#save-access-dismiss").trigger("click"),$("#access-grid").data("kendoGrid").dataSource.read(),AccessManagementNS.selectFirstItem(),$("#access-add-name").val(null),$("#access-add-description").val(null),$("#access-add-category").val(null),toastr.success("Access successfully added")):toastr.error("Access already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};AccessManagementNS.updateAccess=function(n){$.ajax({url:"api/access/"+AccessManagementNS.AccessId,type:"PUT",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#edit-access-dismiss").trigger("click"),$("#access-grid").data("kendoGrid").dataSource.read(),$("#access-add-name").val(null),$("#access-add-description").val(null),$("#access-add-category").val(null),$("#edit-access-popup").prop("disabled",!0),$("#delete-access-popup").prop("disabled",!0),toastr.success("Access successfully updated!")):toastr.error("Access already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};AccessManagementNS.deleteAccess=function(){$.ajax({url:"api/access/"+AccessManagementNS.AccessId,type:"DELETE",contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#delete-access-dismiss").trigger("click"),$("#access-grid").data("kendoGrid").dataSource.read(),$("#access-edit-name").val(null),$("#access-edit-orderNo").val(null),$("#edit-access-popup").prop("disabled",!0),$("#delete-access-popup").prop("disabled",!0),toastr.success("Access successfully deleted!")):toastr.error("Error deleting access!")},error:function(){toastr.error("Something went wrong with the request!")}})};AccessManagementNS.selectFirstItem=function(){var n=$("#access-grid").data("kendoGrid");n.one("dataBound",function(t){setTimeout(function(){var i=t.sender.tbody.find("tr:first");n.select(i);i.trigger("click")},2e3)});n.dataSource.page(1)};RoleManagementNS={};RoleManagementNS.ExcelURL=null;RoleManagementNS.RoleId=null;RoleManagementNS.init=function(){RoleManagementNS.hookup()};RoleManagementNS.onChange=function(){var n=this;n.select().length>=1?n.select().each(function(){var t=n.dataItem($(this));RoleManagementNS.RoleId=t.roleId;$("#role-edit-name").val(t.name);$("#role-edit-description").val(t.description);document.getElementById("role-edit-isactive").checked=t.status==1?!0:!1;$("#edit-role-popup").prop("disabled",!1);$("#delete-role-popup").prop("disabled",!1)}):(RoleManagementNS.RoleId=null,$("#role-edit-name").val(null),$("#role-edit-description").val(null),$("#edit-role-popup").prop("disabled",!0),$("#delete-role-popup").prop("disabled",!0))};RoleManagementNS.populateRole=function(){var n=new kendo.data.DataSource({transport:{read:{url:"api/role/list",dataType:"json"}},batch:!0,pageSize:10,schema:{model:{id:"RoleId",fields:{roleId:{editable:!1,type:"guid"},name:{validation:{required:!0}},description:{validation:{required:!0},hidden:!0},createdOn:{validation:{required:!0}}}}}});$("#role-grid").kendoGrid({dataSource:n,selectable:!0,pageable:!0,columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:500},{field:"description",title:"Description",width:400},{field:"createdOn",title:"Created On",hidden:!0},],scrollable:!1,sortable:!0,change:RoleManagementNS.onChange,filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},pageable:!0})};RoleManagementNS.hookup=function(){var n=$("#form-role-create").kendoValidator().data("kendoValidator"),i=$(".status"),t=$("#form-role-edit").kendoValidator().data("kendoValidator"),i=$(".status");document.getElementById("role-add-isactive").checked=!0;$("#edit-role-dismiss").click(function(){var n=$("#role-grid").data("kendoGrid");n.clearSelection()});$("#role-edit-popup").on("hidden.bs.modal",function(){var n=$("#role-grid").data("kendoGrid");n.clearSelection()});$("#add-role-popup").click(function(){n.hideMessages();RoleManagementNS.RoleId=null;document.getElementById("role-add-isactive").checked=!0;$("#role-add-description").val(null);$("#role-add-name").val(null);RoleManagementNS.populateAddAccessMappings()});$("#edit-role-popup").click(function(){t.hideMessages();RoleManagementNS.populateEditAccessMappings()});$("form#form-role-create").submit(function(t){var i,f,u,r;if(t.preventDefault(),n.validate()){for(i={},i.RoleId=RoleManagementNS.RoleId,i.Status=$("#role-add-isactive").is(":checked")?1:0,i.Description=$("#role-add-description").val(),i.Name=$("#role-add-name").val(),f=[],u=$("#add-selected-access-mapping-grid").data().kendoGrid.dataSource,r=0;r<u._data.length;r++)f.push({AccessId:u._data[r].accessId,Name:u._data[r].name,Category:u._data[r].category});i.AccessMappingItems=f;i.Name!=null&&i.Name.length>0?RoleManagementNS.createRole(i):toastr.error("Name is required")}});$("form#form-role-edit").submit(function(n){var i,f,u,r;if(n.preventDefault(),t.validate()){for(i={},i.RoleId=RoleManagementNS.RoleId,i.Status=$("#role-edit-isactive").is(":checked")?1:0,i.Description=$("#role-edit-description").val(),i.Name=$("#role-edit-name").val(),f=[],u=$("#edit-selected-access-mapping-grid").data().kendoGrid.dataSource,r=0;r<u._data.length;r++)f.push({AccessId:u._data[r].accessId,Name:u._data[r].name,Category:u._data[r].category});i.AccessMappingItems=f;i.Name!=null&&i.Name.length>0?RoleManagementNS.updateRole(i):toastr.error("Name is required")}});$("#delete-role").click(function(){RoleManagementNS.deleteRole()});RoleManagementNS.populateRole()};RoleManagementNS.createRole=function(n){$.ajax({url:"api/role/",type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#save-role-dismiss").trigger("click"),$("#role-grid").data("kendoGrid").dataSource.read(),RoleManagementNS.selectFirstItem(),$("#role-add-description").val(null),$("#role-add-name").val(null),toastr.success("Role successfully added")):toastr.error("Role already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};RoleManagementNS.updateRole=function(n){$.ajax({url:"api/role/"+RoleManagementNS.RoleId,type:"PUT",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#edit-role-dismiss").trigger("click"),$("#role-grid").data("kendoGrid").dataSource.read(),$("#edit-role-popup").prop("disabled",!0),$("#delete-role-popup").prop("disabled",!0),toastr.success("Role successfully updated!")):toastr.error("Role already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};RoleManagementNS.deleteRole=function(){$.ajax({url:"api/role/"+RoleManagementNS.RoleId,type:"DELETE",contentType:"application/json; charset=utf-8",success:function(n){$("#delete-role-dismiss").trigger("click");$("#role-grid").data("kendoGrid").dataSource.read();n!=!1&&n!="false"?($("#role-edit-description").val(null),$("#role-edit-name").val(null),$("#edit-role-popup").prop("disabled",!0),$("#delete-role-popup").prop("disabled",!0),toastr.success("Role successfully deleted!")):toastr.error("Error in deleting role!")},error:function(){toastr.error("Something went wrong with the request!")}})};RoleManagementNS.selectFirstItem=function(){var n=$("#role-grid").data("kendoGrid");n.one("dataBound",function(t){setTimeout(function(){var i=t.sender.tbody.find("tr:first");n.select(i);i.trigger("click")},2e3)});n.dataSource.page(1)};RoleManagementNS.populateAddAccessMappings=function(){$.ajax({url:"api/access/availableMappingList",type:"GET"}).done(function(n){RoleManagementNS.initializeAddAccessMappingGrid(n)}).fail(function(){toastr.error("Something went wrong with the request!")})};RoleManagementNS.populateEditAccessMappings=function(){RoleManagementNS.initializeEditAccessMappingGrid()};RoleManagementNS.initializeAddAccessMappingGrid=function(n){var i=$("#add-available-access-mapping-grid").kendoGrid({dataSource:n,columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:"50px"},{field:"category",title:"Category",width:"50px"},],selectable:"row",filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},scrollable:!0,sortable:!0}).data("kendoGrid"),t;i.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 100px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var t=i.dataSource.skip(),f=n.oldIndex+t,u=n.newIndex+t,e=i.dataSource.data(),r=i.dataSource.getByUid(n.item.data("uid"));i.dataSource.remove(r);i.dataSource.insert(u,r)}});t=$("#add-selected-access-mapping-grid").kendoGrid({dataSource:[],columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:"50px"},{field:"category",title:"Category",width:"50px"},],selectable:"row",filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},scrollable:!0,sortable:!0}).data("kendoGrid");t.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 200px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var i=t.dataSource.skip(),f=n.oldIndex+i,u=n.newIndex+i,e=t.dataSource.data(),r=t.dataSource.getByUid(n.item.data("uid"));t.dataSource.remove(r);t.dataSource.insert(u,r)}});$("#add-mapped-access-to-available").click(function(n){var t=$("#add-selected-access-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&currentSelection.each(function(n,i){var r=t.dataItem(i),u=$("#add-available-access-mapping-grid").data().kendoGrid.dataSource;u.add({accessId:r.accessId?r.accessId:null,name:r.name?r.name:null,category:r.category?r.category:null});t.dataSource.remove(r)});n.preventDefault()});$("#add-available-access-to-selected").click(function(n){var t=$("#add-available-access-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&t.select().each(function(){var n=t.dataItem($(this)),i=$("#add-selected-access-mapping-grid").data().kendoGrid.dataSource;i.add({accessId:n.accessId?n.accessId:null,name:n.name?n.name:null,category:n.category?n.category:null});t.dataSource.remove(n)});n.preventDefault()})};RoleManagementNS.initializeEditAccessMappingGrid=function(){var t=$("#edit-available-access-mapping-grid").kendoGrid({dataSource:{transport:{read:{url:"api/role/unmapped/"+RoleManagementNS.RoleId,dataType:"json"}}},columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:"50px"},{field:"category",title:"Category",width:"50px"},],filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},selectable:"row",sortable:!0}).data("kendoGrid"),n;t.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 100px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var i=t.dataSource.skip(),f=n.oldIndex+i,u=n.newIndex+i,e=t.dataSource.data(),r=t.dataSource.getByUid(n.item.data("uid"));t.dataSource.remove(r);t.dataSource.insert(u,r)}});n=$("#edit-selected-access-mapping-grid").kendoGrid({dataSource:{transport:{read:{url:"api/role/mapped/"+RoleManagementNS.RoleId,dataType:"json"}}},columns:[{field:"accessId",title:"AccessId",hidden:!0},{field:"name",title:"Name",width:"50px"},{field:"category",title:"Category",width:"50px"},],selectable:"row",selectable:"row",filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},scrollable:!0,sortable:!0}).data("kendoGrid");n.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 200px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(t){var i=n.dataSource.skip(),f=t.oldIndex+i,u=t.newIndex+i,e=n.dataSource.data(),r=n.dataSource.getByUid(t.item.data("uid"));n.dataSource.remove(r);n.dataSource.insert(u,r)}});$("#edit-mapped-access-to-available").click(function(n){var t=$("#edit-selected-access-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&currentSelection.each(function(n,i){var r=t.dataItem(i),u=$("#edit-available-access-mapping-grid").data().kendoGrid.dataSource;u.add({accessId:r.accessId,name:r.name,category:r.category});t.dataSource.remove(r)});n.preventDefault()});$("#edit-available-access-to-selected").click(function(n){var t=$("#edit-available-access-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&t.select().each(function(){var n=t.dataItem($(this)),i=$("#edit-selected-access-mapping-grid").data().kendoGrid.dataSource;i.add({accessId:n.accessId?n.accessId:null,name:n.name?n.name:null,category:n.category});t.dataSource.remove(n)});n.preventDefault()})};UserManagementNS={};UserManagementNS.ExcelURL=null;UserManagementNS.UserInfoId=null;UserManagementNS.init=function(){UserManagementNS.hookup();$("h3#page-title").text("User Management");$("#user-edit-country").kendoComboBox({dataTextField:"text",dataValueField:"value",change:function(n){var t=n.sender;t.value()&&t.select()===-1&&t.value("")},dataSource:countryList,suggest:!0});$("#user-add-country").kendoComboBox({dataTextField:"text",dataValueField:"value",change:function(n){var t=n.sender;t.value()&&t.select()===-1&&t.value("")},dataSource:countryList,suggest:!0})};UserManagementNS.onChange=function(){var n=this;n.select().length>=1?n.select().each(function(){var t=n.dataItem($(this)),i;UserManagementNS.UserInfoId=t.userInfoId;$("#user-edit-firstname").val(t.firstName);$("#user-edit-lastname").val(t.lastName);$("#user-edit-email").val(t.email);$("#user-edit-address").val(t.address);$("#user-edit-companyid").val(t.companyId);$("#user-edit-position").val(t.position);$("#user-edit-contactno").val(t.contactNo);i=$("#user-edit-country").data("kendoComboBox");i.value(t.country);$("#user-edit-timezone").val(t.timezone);document.getElementById("user-edit-isactive").checked=t.status===1?!0:!1;$("#edit-user-popup").prop("disabled",!1);$("#delete-user-popup").prop("disabled",!1)}):(UserManagementNS.UserInfoId=null,$("#user-edit-firstname").val(null),$("#user-edit-lastname").val(null),$("#user-edit-email").val(null),$("#user-edit-address").val(null),$("#user-edit-company").val(null),$("#user-edit-position").val(null),$("#user-edit-contactno").val(null),$("#user-edit-country").val(null),$("#user-edit-timezone").val(null),$("#edit-user-popup").prop("disabled",!0),$("#delete-user-popup").prop("disabled",!0))};UserManagementNS.populateUser=function(){var n=new kendo.data.DataSource({transport:{read:{url:"api/userinfo/list",dataType:"json"}},batch:!0,pageSize:10,schema:{model:{id:"UserInfoId",fields:{userInfoId:{editable:!1,type:"guid"},lastName:{type:"string"},firstName:{type:"string"},email:{type:"string"},position:{type:"string"},contactNo:{type:"string"},country:{type:"string"},status:{type:"int"},address:{type:"string"},position:{type:"string"},companyId:{type:"guid"},timezone:{type:"string"}}}}});$("#user-grid").kendoGrid({dataSource:n,selectable:!0,pageable:!0,columns:[{field:"userInfoId",title:"UserInfoId",hidden:!0},{field:"firstName",title:"First Name"},{field:"lastName",title:"Last Name"},{field:"email",title:"Email"},{field:"position",title:"Position"},{field:"contactNo",title:"Contact Number"}],scrollable:!1,sortable:!0,change:UserManagementNS.onChange,filterable:{extra:!1,operators:{string:{contains:"Contains",eq:"Is equal to"}}},pageable:!0})};UserManagementNS.hookup=function(){var n=$("#form-user-create").kendoValidator().data("kendoValidator"),i=$(".status"),t=$("#form-user-edit").kendoValidator().data("kendoValidator"),i=$(".status");document.getElementById("user-add-isactive").checked=!0;$("#add-user-popup").click(function(){UserManagementNS.populateAddRoleMappings();n.hideMessages();$("#user-add-firstname").val(null);$("#user-add-lastname").val(null);$("#user-add-email").val(null);$("#user-add-address").val(null);$("#user-add-companyid").val($("#user-add-companyid option:first").val());$("#user-add-position").val(null);$("#user-add-contactno").val(null);$("#user-add-country").val(null);$("#user-add-timezone").val(null);document.getElementById("user-add-isactive").checked=!0});$("#edit-user-popup").click(function(){t.hideMessages();UserManagementNS.populateEditRoleMappings()});$("#edit-user-dismiss").click(function(){var n=$("#user-grid").data("kendoGrid");n.clearSelection()});$("#user-edit-popup").on("hidden.bs.modal",function(){var n=$("#user-grid").data("kendoGrid");n.clearSelection()});$("form#form-user-create").submit(function(t){var i,u,f,r;if(t.preventDefault(),n.validate()){for(i={},i.FirstName=$("#user-add-firstname").val(),i.LastName=$("#user-add-lastname").val(),i.Email=$("#user-add-email").val(),i.Address=$("#user-add-address").val(),i.Position=$("#user-add-position").val(),i.CompanyId=$("#user-add-companyid").val(),i.ContactNo=$("#user-add-contactno").val(),i.Country=$("#user-add-country").val(),i.Status=$("#user-add-isactive").is(":checked")?1:0,i.Timezone=null,u=[],f=$("#add-selected-role-mapping-grid").data().kendoGrid.dataSource,r=0;r<f._data.length;r++)u.push({RoleId:f._data[r].roleId,Name:f._data[r].name});i.RoleMappingItems=u;i.FirstName!=null&&i.FirstName.length>0&&u.length>=1&&validateEmail(i.Email)?UserManagementNS.createUser(i):i.LastName==null?toastr.error("Lastname is required"):validateEmail(i.Email)?i.RoleMappingItems.length<1?toastr.error("Role is required"):toastr.error("Firstname is required"):toastr.error("Not a valid email")}});$("form#form-user-edit").submit(function(n){var i,u,f,r;if(n.preventDefault(),t.validate()){for(i={},i.FirstName=$("#user-edit-firstname").val(),i.LastName=$("#user-edit-lastname").val(),i.Email=$("#user-edit-email").val(),i.Address=$("#user-edit-address").val(),i.Position=$("#user-edit-position").val(),i.CompanyId=$("#user-edit-companyid").val(),i.ContactNo=$("#user-edit-contactno").val(),i.Country=$("#user-edit-country").val(),i.Status=$("#user-edit-isactive").is(":checked")?1:0,i.Timezone=null,i.UserInfoId=UserManagementNS.UserInfoId,u=[],f=$("#edit-selected-role-mapping-grid").data().kendoGrid.dataSource,r=0;r<f._data.length;r++)u.push({RoleId:f._data[r].roleId,Name:f._data[r].name});i.RoleMappingItems=u;i.FirstName!=null&&i.FirstName.length>0&&u.length>=1&&validateEmail(i.Email)?UserManagementNS.updateUser(i):i.LastName==null?toastr.error("Lastname is required"):validateEmail(i.Email)?i.RoleMappingItems.length<1?toastr.error("Role is required"):toastr.error("Firstname is required"):toastr.error("Not a valid email")}});$("#delete-user").click(function(){UserManagementNS.deleteUser()});UserManagementNS.populateUser();$.ajax({url:"api/vendor/items",type:"GET",contentType:"application/json; charset=utf-8",success:function(n){for(var t=0;t<n.length;t++)$("#user-edit-companyid").append($("<option><\/option>").attr("value",n[t].vendorId).text(n[t].name)),$("#user-add-companyid").append($("<option><\/option>").attr("value",n[t].vendorId).text(n[t].name))},error:function(){toastr.error("Something went wrong with the request")}})};UserManagementNS.createUser=function(n){$.ajax({url:"api/userinfo/",type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#save-user-dismiss").trigger("click"),$("#user-grid").data("kendoGrid").dataSource.read(),UserManagementNS.selectFirstItem(),$("#user-add-firstname").val(null),$("#user-add-lastname").val(null),$("#user-add-email").val(null),$("#user-add-address").val(null),$("#user-add-companyid").val(null),$("#user-add-position").val(null),$("#user-add-contactno").val(null),$("#user-add-country").val(null),$("#user-add-timezone").val(null),document.getElementById("user-edit-isactive").checked=!0,toastr.success("User successfully added")):toastr.error("User already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};UserManagementNS.updateUser=function(n){$.ajax({url:"api/userinfo/"+UserManagementNS.UserInfoId,type:"PUT",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n!=!1&&n!="false"?($("#edit-user-dismiss").trigger("click"),$("#user-grid").data("kendoGrid").dataSource.read(),$("#user-edit-firstname").val(null),$("#user-edit-lastname").val(null),$("#user-edit-email").val(null),$("#user-edit-address").val(null),$("#user-edit-company").val(null),$("#user-edit-position").val(null),$("#user-edit-contactno").val(null),$("#user-edit-country").val(null),$("#user-edit-timezone").val(null),$("#user-edit-companyid").val(null),document.getElementById("user-edit-isactive").checked=!0,$("#edit-user-popup").prop("disabled",!0),$("#delete-user-popup").prop("disabled",!0),toastr.success("User successfully updated!")):toastr.error("User already exist!")},error:function(){toastr.error("Something went wrong with the request!")}})};UserManagementNS.deleteUser=function(){$.ajax({url:"api/userinfo/"+UserManagementNS.UserInfoId,type:"DELETE",contentType:"application/json; charset=utf-8",success:function(n){$("#delete-user-dismiss").trigger("click");n==!1?toastr.success("Error in deleting user"):($("#user-grid").data("kendoGrid").dataSource.read(),$("#user-edit-firstname").val(null),$("#user-edit-lastname").val(null),$("#user-edit-email").val(null),$("#user-edit-address").val(null),$("#user-edit-company").val(null),$("#user-edit-position").val(null),$("#user-edit-contactno").val(null),$("#user-edit-country").val(null),$("#user-edit-timezone").val(null),$("#user-edit-companyid").val(null),$("#edit-user-popup").prop("disabled",!0),$("#delete-user-popup").prop("disabled",!0));toastr.success("User successfully deleted!")},error:function(){toastr.error("Something went wrong with the request!")}})};UserManagementNS.selectFirstItem=function(){var n=$("#user-grid").data("kendoGrid");n.one("dataBound",function(t){setTimeout(function(){var i=t.sender.tbody.find("tr:first");n.select(i);i.trigger("click")},2e3)});n.dataSource.page(1)};UserManagementNS.populateAddRoleMappings=function(){$.ajax({url:"api/role/availableMappingList",type:"GET"}).done(function(n){UserManagementNS.initializeAddRoleMappingGrid(n)}).fail(function(){toastr.error("Something went wrong with the request!")})};UserManagementNS.populateEditRoleMappings=function(){UserManagementNS.initializeEditRoleMappingGrid(null)};UserManagementNS.initializeAddRoleMappingGrid=function(n){var i=$("#add-available-role-mapping-grid").kendoGrid({dataSource:n,columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:"50px"},],selectable:"row"}).data("kendoGrid"),t;i.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 100px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var t=i.dataSource.skip(),f=n.oldIndex+t,u=n.newIndex+t,e=i.dataSource.data(),r=i.dataSource.getByUid(n.item.data("uid"));i.dataSource.remove(r);i.dataSource.insert(u,r)}});t=$("#add-selected-role-mapping-grid").kendoGrid({dataSource:[],columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:"50px"},],selectable:"row"}).data("kendoGrid");t.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 200px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var i=t.dataSource.skip(),f=n.oldIndex+i,u=n.newIndex+i,e=t.dataSource.data(),r=t.dataSource.getByUid(n.item.data("uid"));t.dataSource.remove(r);t.dataSource.insert(u,r)}});$("#add-mapped-role-to-available").click(function(n){var t=$("#add-selected-role-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&currentSelection.each(function(n,i){var r=t.dataItem(i),u=$("#add-available-role-mapping-grid").data().kendoGrid.dataSource;u.add({roleId:r.roleId?r.roleId:null,name:r.name?r.name:null});t.dataSource.remove(r)});n.preventDefault()});$("#add-available-role-to-selected").click(function(n){var t=$("#add-available-role-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&t.select().each(function(){var n=t.dataItem($(this)),i=$("#add-selected-role-mapping-grid").data().kendoGrid.dataSource;i.add({roleId:n.roleId?n.roleId:null,name:n.name?n.name:null});t.dataSource.remove(n)});n.preventDefault()})};UserManagementNS.initializeEditRoleMappingGrid=function(){var t=$("#edit-available-role-mapping-grid").kendoGrid({dataSource:{transport:{read:{url:"api/userinfo/unmapped/"+UserManagementNS.UserInfoId,dataType:"json"}}},columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:"50px"},],selectable:"row"}).data("kendoGrid"),n;t.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 100px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(n){var i=t.dataSource.skip(),f=n.oldIndex+i,u=n.newIndex+i,e=t.dataSource.data(),r=t.dataSource.getByUid(n.item.data("uid"));t.dataSource.remove(r);t.dataSource.insert(u,r)}});n=$("#edit-selected-role-mapping-grid").kendoGrid({dataSource:{transport:{read:{url:"api/userinfo/mapped/"+UserManagementNS.UserInfoId,dataType:"json"}}},columns:[{field:"roleId",title:"RoleId",hidden:!0},{field:"name",title:"Name",width:"50px"},],selectable:"row"}).data("kendoGrid");n.table.kendoSortable({filter:">tbody >tr",hint:function(n){var t=$('<table style="width: 200px;" class="k-grid k-widget"><\/table>');return t.append(n.clone()),t.css("opacity",.7),t},cursor:"move",placeholder:function(){return $('<tr colspan="4" class="placeholder"><\/tr>')},change:function(t){var i=n.dataSource.skip(),f=t.oldIndex+i,u=t.newIndex+i,e=n.dataSource.data(),r=n.dataSource.getByUid(t.item.data("uid"));n.dataSource.remove(r);n.dataSource.insert(u,r)}});$("#edit-mapped-role-to-available").click(function(n){var t=$("#edit-selected-role-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&currentSelection.each(function(n,i){var r=t.dataItem(i),u=$("#edit-available-role-mapping-grid").data().kendoGrid.dataSource;u.add({roleId:r.roleId,name:r.name});t.dataSource.remove(r)});n.preventDefault()});$("#edit-available-role-to-selected").click(function(n){var t=$("#edit-available-role-mapping-grid").data("kendoGrid");currentSelection=t.select();t.select().length>=1&&t.select().each(function(){var n=t.dataItem($(this)),i=$("#edit-selected-role-mapping-grid").data().kendoGrid.dataSource;i.add({roleId:n.roleId?n.roleId:null,name:n.name?n.name:null});t.dataSource.remove(n)});n.preventDefault()})};MyProfile={};MyProfile.UserInfoId=null;MyProfile.Password=null;MyProfile.init=function(n){MyProfile.UserInfoId=n;MyProfile.hookup(n);$("h3#page-title").text("My Profile");$("#user-profile-edit-country").kendoComboBox({dataTextField:"text",dataValueField:"value",change:function(n){var t=n.sender;t.value()&&t.select()===-1&&t.value("")},dataSource:countryList,suggest:!0})};MyProfile.hookup=function(n){$.ajax({url:"api/userinfo/profile/"+n,type:"GET",cache:!1,contentType:"application/json; charset=utf-8",success:function(n){$("#user-profile-fullname").html(n.firstName+" "+n.lastName);$("#user-profile-email").html(n.email);$("#user-profile-edit-firstname").val(n.firstName);$("#user-profile-edit-lastname").val(n.lastName);$("#user-profile-edit-address").val(n.address);$("#user-profile-edit-contactno").val(n.contactNo);$("#user-profile-edit-email").val(n.email);var t=$("#user-profile-edit-country").data("kendoComboBox");t.value(n.country);$("#user-profile-edit-position").val(n.position);$("#user-profile-edit-password").val(n.password);MyProfile.Password=n.password;$("#user-profile-edit-password-confirm").val(n.password);$("#user-profile-company").html(n.company!=null?n.company:"Not available");$("#img-profile").attr("src",n.imageURL)},error:function(){toastr.error("Something went wrong with the request!")}});$("input[type=file]").change(function(){MyProfile.ReadImage(this)});$("#edit-user-profile").click(function(){var n={};n.Address=$("#user-profile-edit-address").val();n.ContactNo=$("#user-profile-edit-contactno").val();n.ImageUrl=$("#img-profile").attr("src");n.Position=$("#user-profile-edit-position").val();n.Country=$("#user-profile-edit-country").val();n.UserInfoId=MyProfile.UserInfoId;MyProfile.updateProfile(n)});var t=$("#form-update-password").kendoValidator().data("kendoValidator"),i=$(".status");$("form#form-update-password").submit(function(n){if(n.preventDefault(),t.validate()){var i={};i.Password=$("#user-profile-edit-password").val();i.UserInfoId=MyProfile.UserInfoId;MyProfile.updatePassword(i)}})};MyProfile.updateProfile=function(n){$.ajax({type:"PUT",url:"api/userInfo/updateProfile/"+MyProfile.UserInfoId,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(){toastr.success("Profile updated");$("#display-picture").attr("src",n.ImageUrl)},error:function(){toastr.error("Unable to save user profile.")}})};MyProfile.ReadImage=function(n){var i,r,t;n.files&&n.files[0]&&(i=n.files[0].name.split(".").pop().toLowerCase(),r=["jpg","jpeg","png"].indexOf(i)>-1,r?(t=new FileReader,t.onload=function(n){$("#img-profile").attr("src",n.target.result);var t=n.target.result;imageURL=t.replace(" ","+")},t.readAsDataURL(n.files[0])):(toastr.error("Supported filetypes are only jpg, jpeg and png. Please upload files with these types only"),document.getElementById("picture-file").value=""))};MyProfile.updatePassword=function(n){$("#user-profile-edit-password").val()==$("#user-profile-edit-password-confirm").val()?$("#user-profile-edit-password").val()==MyProfile.Password?toastr.error("You did not change anything."):$.ajax({type:"PUT",url:"api/userInfo/updatePassword/"+MyProfile.UserInfoId,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(){toastr.success("Password successfully updated")},error:function(){toastr.error("Unable to save password.")}}):toastr.error("Password does not match")};VendorHistoryNS={};VendorHistoryNS.VendorId=null;VendorHistoryNS.InitializeControl=function(n){VendorHistoryNS.VendorId=n;VendorHistoryNS.LoadControls(n)};VendorHistoryNS.DataBound=function(){$("#saveVendor").focus();$("#vendorModal").animate({scrollTop:$("#saveVendor").offset().top},{duration:3e3,specialEasing:{width:"linear",height:"easeOutBounce"}})};VendorHistoryNS.LoadControls=function(){$("#vendor-alert-history-item").click(function(){VendorHistoryNS.getAlertHistory()});$("#vendor-contact-history-item").click(function(){VendorHistoryNS.getContactHistory()});$("#vendor-history-grid").kendoGrid({dataSource:{transport:{read:{url:"api/vendor/"+VendorHistoryNS.VendorId+"/vendorhistory",dataType:"json"}},schema:{model:{fields:{name:{type:"string"},status:{type:"int"},description:{type:"string"},email:{type:"string"},address:{type:"string"},contactNo:{type:"string"},modifiedOn:{type:"date"},modifiedBy:{type:"string"},createdOn:{type:"date"},createdBy:{type:"string"}}}},pageSize:10},noRecords:!0,pageable:!0,sortable:!0,filterable:!0,scrollable:!1,messages:{noRecords:"History not yet available"},columns:[{field:"name",title:"Company",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"email",title:"Email",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"contactNo",title:"ContactNo",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"status",title:"Status",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"modifiedOn",title:"Modified On",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}},format:"{0:MM/dd/yyyy h:mm:ss tt}"},{field:"modifiedBy",title:"Modified By",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"createdOn",title:"Created On",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}},format:"{0:MM/dd/yyyy h:mm:ss tt}"},{field:"createdBy",title:"Created By",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}},hidden:!0},]})};VendorHistoryNS.getContactHistory=function(){$("#vendor-contact-history-grid").kendoGrid({dataSource:{transport:{read:{url:"api/vendor/"+VendorHistoryNS.VendorId+"/vendorcontacthistory",dataType:"json"}},schema:{model:{fields:{type:{type:"string"},name:{type:"string"},status:{type:"string"},createdBy:{type:"string"},createdOn:{type:"date"},modifiedOn:{type:"date"},modifiedBy:{type:"string"}}}},pageSize:10},noRecords:!0,pageable:!0,sortable:!0,filterable:!0,scrollable:!1,messages:{noRecords:"History not yet available"},columns:[{field:"name",title:"Name",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"type",title:"Type",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"status",title:"Status",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"createdOn",title:"Created On",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}},format:"{0:MM/dd/yyyy h:mm:ss tt}"},{field:"createdBy",title:"Created By",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"modifiedOn",title:"Modified On",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}},format:"{0:MM/dd/yyyy h:mm:ss tt}"},{field:"modifiedBy",title:"Modified By",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},]})};VendorHistoryNS.getAlertHistory=function(){$("#vendor-alert-history-grid").kendoGrid({dataSource:{transport:{read:{url:"api/vendor/"+VendorHistoryNS.VendorId+"/vendoralerthistory",dataType:"json"}},schema:{model:{fields:{value:{type:"string"},name:{type:"string"},emails:{type:"string"},createdBy:{type:"string"},createdOn:{type:"date"},modifiedOn:{type:"date"},modifiedBy:{type:"string"}}}},pageSize:10},noRecords:!0,pageable:!0,sortable:!0,filterable:!0,scrollable:!1,messages:{noRecords:"History not yet available"},columns:[{field:"name",title:"Name",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"value",title:"Value",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"createdOn",title:"Created On",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}},format:"{0:MM/dd/yyyy h:mm:ss tt}"},{field:"createdBy",title:"Created By",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},{field:"modifiedOn",title:"Modified On",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}},format:"{0:MM/dd/yyyy h:mm:ss tt}"},{field:"modifiedBy",title:"Modified By",width:120,filterable:{cell:{operator:"contains",suggestionOperator:"contains"}}},]})};VendorManagementNS={};VendorManagementNS.VendorID="";VendorManagementNS.Mode=0;VendorManagementNS.GeneralInformationIsModified=!1;VendorManagementNS.ContactInformationIsModified=!1;VendorManagementNS.AlertsIsModified=!1;VendorManagementNS.DeletedContacts=[];VendorManagementNS.clearContactFields=function(){$("#contactFirstName").val(null);$("#contactLastName").val(null);$("#contactEmail").val(null);$("#contactAddress").val(null);$("#contactPhone").val(null);$("#contactPosition").val(null);var n=$("#contactCountry").data("kendoComboBox");n.value("")};VendorManagementNS.resetCollapse=function(){$("#collapseOne").removeClass("in");$("#collapseTwo").removeClass("in");$("#collapseThree").removeClass("in");$("#collapseFour").removeClass("in");$("#headingOne").trigger("click")};VendorManagementNS.SelectItem=function(n){var t=this.dataItem(n.item.index());$("#contactEmail").html(t.email);$("#contactAddress").html(t.address);$("#contactCountry").html(t.country);$("#contactPhone").html(t.contactNo);$("#contactId").html(t.userInfoId)};VendorManagementNS.init=function(){$("#form-vendor").kendoValidator().data("kendoValidator").validate();VendorManagementNS.registerEvents()};VendorManagementNS.getVendorById=function(n){$.ajax({url:"api/vendor/"+n,type:"GET",contentType:"application/json; charset=utf-8",success:function(n){n?($("#general-name").val(n.generalInformation.name),$("#general-address").val(n.generalInformation.address),$("#general-email").val(n.generalInformation.email),$("input[name=general-status][value="+n.generalInformation.isActive+"]").prop("checked",!0),$("#general-description").val(n.generalInformation.description),$("#general-contact").val(n.generalInformation.contactNo),n.alert&&(document.getElementById("isPrimaryContactChange").checked=n.alert.isPrimaryContactChange==1?!0:!1,document.getElementById("isNewlyAddedContact").checked=n.alert.isNewlyAddedContact==1?!0:!1,document.getElementById("isNewlyAddedProduct").checked=n.alert.isNewlyAddedProducts==1?!0:!1,$("#primaryContactEmails").val(n.alert.primaryContactEmails),$("#newlyAddedContactsEmails").val(n.alert.newlyAddedContactsEmails),$("#newlyAddedProductsEmails").val(n.alert.newlyAddedProductsEmails),n.alert.primaryContactEmails?$("#isPrimaryContactChange").attr("disabled",!1):$("#isPrimaryContactChange").attr("disabled",!0),n.alert.newlyAddedContactsEmails?$("#isNewlyAddedContact").attr("disabled",!1):$("#isNewlyAddedContact").attr("disabled",!0),n.alert.newlyAddedProductsEmails?$("#isNewlyAddedProduct").attr("disabled",!1):$("#isNewlyAddedProduct").attr("disabled",!0),VendorManagementNS.populateContactGrid(n.contactInformation),VendorManagementNS.Mode=1)):toastr.error("Something went wrong with the request!")},error:function(){toastr.error("Something went wrong with the request!")}})};VendorManagementNS.populateContactGrid=function(n){$("#vendor-user-grid").data("kendoGrid").dataSource.data([]);var t=new kendo.data.DataSource({data:n}),i=$("#vendor-user-grid").data("kendoGrid");i.setDataSource(t)};VendorManagementNS.initializeModalControls=function(n){VendorManagementNS.getVendorById(n)};VendorManagementNS.registerEvents=function(){$("#contactCountry").kendoComboBox({dataTextField:"text",dataValueField:"value",change:function(n){var t=n.sender;t.value()&&t.select()===-1&&t.value("")},dataSource:countryList,suggest:!0});var n=$("#form-vendor").kendoValidator().data("kendoValidator");$("#collapseOne :input").change(function(){VendorManagementNS.Mode==1&&(VendorManagementNS.GeneralInformationIsModified=!0)});$("#collapseTwo :input").change(function(){VendorManagementNS.Mode==1&&(VendorManagementNS.ContactInformationIsModified=!0)});$("#vendor-user-grid").change(function(){VendorManagementNS.Mode==1&&(VendorManagementNS.ContactInformationIsModified=!0)});$("#collapseThree :input").change(function(){VendorManagementNS.Mode==1&&(VendorManagementNS.AlertsIsModified=!0)});$("#primaryContactEmails").change(function(){$(this).val()?$("#isPrimaryContactChange").prop("disabled",!1):($("#isPrimaryContactChange").prop("checked",!1),$("#isPrimaryContactChange").attr("disabled",!0))});$("#newlyAddedContactsEmails").change(function(){$(this).val()?$("#isNewlyAddedContact").prop("disabled",!1):($("#isNewlyAddedContact").prop("checked",!1),$("#isNewlyAddedContact").attr("disabled",!0))});$("#newlyAddedProductsEmails").change(function(){$(this).val()?$("#isNewlyAddedProduct").prop("disabled",!1):($("#isNewlyAddedProduct").prop("checked",!1),$("#isNewlyAddedProduct").attr("disabled",!0))});$("#addVendor").click(function(){$("#form-vendor").kendoValidator().data("kendoValidator").validate();$("#history-collpase").hide();VendorManagementNS.Mode=0;VendorManagementNS.clearContactFields();$("#form-vendor").kendoValidator().data("kendoValidator").validate();$("#vendor-user-grid").data("kendoGrid").dataSource.data([]);$("#isNewlyAddedProduct").attr("disabled",!0);$("#isNewlyAddedContact").attr("disabled",!0);$("#isPrimaryContactChange").attr("disabled",!0);VendorManagementNS.DeletedContacts=[];VendorManagementNS.resetCollapse()});$("form#form-vendor").submit(function(t){t.preventDefault();VendorManagementNS.clearContactFields();var i=$("#vendor-user-grid").data().kendoGrid.dataSource.view();n.validate()&&i.length>=1?VendorManagementNS.save():i.length<1&&toastr.error("Contact is Required")});$("#vendor-user-grid").kendoGrid({dataSource:[],dataBound:function(){$("a.k-button.k-button-icontext.k-grid-delete").html('<span class="fas fa-trash-alt"> <\/span>');$("a.k-button.k-button-icontext.k-grid-delete").css("color : black");$(".is-primary-contact").click(function(){var n=$(this).attr("item-guid");$(".is-primary-contact").each(function(){var i,t;for($(this).attr("data-value",2),i=$("#vendor-user-grid").data().kendoGrid.dataSource.view(),t=0;t<i.length;t++)i[t].uid.toLowerCase()!=n.toLowerCase()?i[t].set("type",2):i[t].set("type",1)});$(this).attr("data-value",1)})},selectable:!0,pageable:!0,columns:[{field:"userInfoId",title:"UserInfoId",hidden:!0},{field:"firstName",title:"First Name",width:"150px"},{field:"lastName",title:"Last Name",width:"150px"},{field:"email",title:"Email",width:"150px"},{field:"position",title:"Position",width:"150px"},{field:"country",title:"Country",width:"150px",hidden:!0},{field:"address",title:"Country",width:"100px",hidden:!0},{field:"contactNo",title:"Contact No.",width:"100px"},{field:"type",title:"Primary",width:"100px",template:'<p class="text-center is-primary-contact"  style="cursor: pointer" item-guid="#:uid#" data-value="#:type#"><span><i class="#: type  == 1 ? "fa fa-check" : "fa fa-times" #"><\/i><\/span><\/p>'},{field:"destroy",title:" ",width:"60px",template:"<center> <span class='fas fa-trash' style='text-align: center; cursor:pointer' onclick=\"VendorManagementNS.deleteUserContactRow('#= uid #')\" > <\/span> <\/center>"}],editable:"inline",noRecords:{template:"No data available."},pageable:!1});$("#history-collpase").on("show.bs.collapse",function(){VendorManagementNS.getHistory()});$("#contact-collpase").on("show.bs.collapse",function(){VendorManagementNS.showContactInfo()});$("#add-user-to-list").click(function(n){var i,o,e;n.preventDefault();var r=$("#contactFirstName").val(),u=$("#contactLastName").val(),t=$("#contactEmail").val(),s=$("#contactAddress").val(),f=$("#contactCountry").val(),h=$("#contactPhone").val(),c=$("#contactPosition").val();if(r||$("#firstNameValidator").show(),r&&$("#firstNameValidator").hide(),u||$("#lastNameValidator").show(),u&&$("#lastNameValidator").hide(),t&&validateEmail(t)||$("#emailValidator").show(),t&&validateEmail(t)&&$("#emailValidator").hide(),f||$("#countryValidator").show(),f&&$("#countryValidator").hide(),r&&u&&validateEmail(t)&&f){for(i=$("#vendor-user-grid").data().kendoGrid.dataSource,o=!1,e=0;e<i._view.length;e++)i._view[e].email.toLowerCase()==t.toLowerCase()&&(o=!0);o?toastr.error("Email already exists."):(i.add({userInfoId:null,firstName:r,lastName:u,email:t,address:s,country:f,contactNo:h,position:c,type:i._view.length<1?1:2}),VendorManagementNS.clearContactFields())}});$("#vendorModal").on("hidden.bs.modal",function(){$("form#form-vendor").trigger("reset");$("#history-collpase").hide();$("#vendorModalLabel").text("Add Vendor");VendorManagementNS.Mode=0;$("#form-vendor").kendoValidator().data("kendoValidator").validate()});$("#headingOne").click(function(){setTimeout(function(){!$("#general-name").offset().top<1&&($("#general-name").focus(),$("#vendorModal").animate({scrollTop:$("#general-name").offset().top},{duration:500,specialEasing:{width:"linear",height:"easeOutBounce"}}))},500)});$("#headingTwo").click(function(){setTimeout(function(){!$("#contactFirstName").offset().top<1&&($("#contactFirstName").focus(),$("#vendorModal").animate({scrollTop:$("#contactFirstName").offset().top},{duration:500,specialEasing:{width:"linear",height:"easeOutBounce"}}))},500)});$("#headingThree").click(function(){setTimeout(function(){!$("#primaryContactEmails").offset().top<1&&($("#primaryContactEmails").focus(),$("#vendorModal").animate({scrollTop:$("#primaryContactEmails").offset().top},{duration:500,specialEasing:{width:"linear",height:"easeOutBounce"}}))},500)});$("#headingFour").click(function(){setTimeout(function(){$("#vendor-history-view")&&!$("#vendor-history-view").offset().top<1&&($("#saveVendor").focus(),$("#vendorModal").animate({scrollTop:$("#saveVendor").offset().top},{duration:2e3,specialEasing:{width:"linear",height:"easeOutBounce"}}))},1e3)})};VendorManagementNS.showAddVendor=function(){VendorManagementNS.Mode=0};VendorManagementNS.showEditVendor=function(n){VendorManagementNS.VendorID=n;VendorManagementNS.Mode=1;VendorManagementNS.initializeModalControls(VendorManagementNS.VendorID);VendorManagementNS.GeneralInformationIsModified=!1;VendorManagementNS.ContactInformationIsModified=!1;VendorManagementNS.AlertsIsModified=!1;var t=$("#form-vendor").kendoValidator().data("kendoValidator");t.hideMessages();$("#history-collpase").show();$("#vendorModalLabel").text("Edit Vendor");$("#vendor-history-grid").data("kendoGrid")&&$("#vendor-history-grid").data("kendoGrid").dataSource.data([]);VendorManagementNS.DeletedContacts=[];$("#vendorModal").modal("show");VendorManagementNS.resetCollapse()};VendorManagementNS.deleteUserContactRow=function(n){var i,t,r,u;if(confirm("Are you sure you want to delete this item?"))for(i=$("#vendor-user-grid").data().kendoGrid.dataSource.view(),t=0;t<i.length;t++)i[t].uid.toLowerCase()==n.toLowerCase()&&(i[t].type!=1?(r=$("#vendor-user-grid").data("kendoGrid"),u=r.dataSource.getByUid(n.toLowerCase()),r.dataSource.remove(u),i[t].userInfoId!=null&&VendorManagementNS.DeletedContacts.push({UserInfoId:i[t].userInfoId})):toastr.error("Primary contact could not be deleted."))};VendorManagementNS.save=function(){for(var r,n,u=[],e=$("#contact-list").children().length,i=$("#vendor-user-grid").data().kendoGrid.dataSource.view(),f=0,t=0;t<i.length;t++)r={},r.Address=i[t].address,r.FirstName=i[t].firstName,r.LastName=i[t].lastName,r.Email=i[t].email,r.ContactNo=i[t].contactNo,r.Position=i[t].position,r.UserInfoId=i[t].userInfoId==null?"00000000-0000-0000-0000-000000000000":i[t].userInfoId,r.Country=i[t].country,r.Type=i[t].type,u.push(r),i[t].type==1&&f++;if(f==0){toastr.error("Primary contact is required");return}n={};n.GeneralInformation={};n.GeneralInformation.Name=$("#general-name").val();n.GeneralInformation.Address=$("#general-address").val();n.GeneralInformation.Email=$("#general-email").val();n.GeneralInformation.IsActive=TryParseInt($("input[name=general-status]:checked").val(),0);n.GeneralInformation.Description=$("#general-description").val();n.GeneralInformation.ContactNo=$("#general-contact").val();n.ContactInformation=u;n.Alert={};n.Alert.IsPrimaryContactChange=$("#isPrimaryContactChange").is(":checked")?1:0;n.Alert.PrimaryContactEmails=$("#primaryContactEmails").val();n.Alert.IsNewlyAddedContact=$("#isNewlyAddedContact").is(":checked")?1:0;n.Alert.NewlyAddedContactsEmails=$("#newlyAddedContactsEmails").val();n.Alert.IsNewlyAddedProducts=$("#isNewlyAddedProduct").is(":checked")?1:0;n.Alert.NewlyAddedProductsEmails=$("#newlyAddedProductsEmails").val();VendorManagementNS.Mode==0?(n.VendorId="00000000-0000-0000-0000-000000000000",n.IsGeneralInformationChanged=!0,n.IsContactInformationChanged=!0,n.IsAlertChanged=!0,VendorManagementNS.createVendor(n)):(n.IsGeneralInformationChanged=VendorManagementNS.GeneralInformationIsModified,n.IsContactInformationChanged=VendorManagementNS.ContactInformationIsModified,n.IsAlertChanged=VendorManagementNS.AlertsIsModified,n.DeletedContacts=VendorManagementNS.DeletedContacts,n.VendorId=VendorManagementNS.VendorID,VendorManagementNS.updateVendor(n))};VendorManagementNS.createVendor=function(n){$.ajax({url:"api/vendor/",type:"POST",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n.error?toastr.error(n.error):($("#vendor-user-grid").data("kendoGrid").dataSource.data([]),$("#contractGrid").data("kendoGrid").dataSource.read(),toastr.success("Vendor successfully added"),$("#vendorModal").modal("hide"),VendorManagementNS.Mode=0,$("#vendor-history-grid").data("kendoGrid")&&$("#vendor-history-grid").data("kendoGrid").dataSource.data([]))},error:function(){toastr.error("Something went wrong with the request!")}})};VendorManagementNS.updateVendor=function(n){$.ajax({url:"api/vendor/"+VendorManagementNS.VendorID,type:"PUT",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:function(n){n.error?toastr.error(n.error):($("#vendor-user-grid").data("kendoGrid").dataSource.data([]),$("#contractGrid").data("kendoGrid").dataSource.read(),toastr.success("Vendor successfully updated"),$("#vendorModal").modal("hide"),VendorManagementNS.Mode=0)},error:function(){toastr.error("Something went wrong with the request!")}})};VendorManagementNS.getHistory=function(){$.ajax({url:"/history/vendor?vendorId="+VendorManagementNS.VendorID}).done(function(n){$("#vendor-history-content").empty();$("#vendor-history-content").html(n)})};var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_SCOL=$(".right_scol"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");(function(n,t){var i=function(n,t,i){var r;return function(){function e(){i||n.apply(u,f);r=null}var u=this,f=arguments;r?clearTimeout(r):i&&n.apply(u,f);r=setTimeout(e,t||100)}};jQuery.fn[t]=function(n){return n?this.bind("resize",i(n)):this.trigger(t)}})(jQuery,"smartresize");$(document).ready(function(){var n=function(){$RIGHT_SCOL.css("min-height",$(window).height());var n=$BODY.outerHeight(),r=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),t=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),i=n<t?t:n;i-=$NAV_MENU.height()+r;$RIGHT_SCOL.css("min-height",i)};$SIDEBAR_MENU.find("a").on("click",function(){var t=$(this).parent();t.is(".active")?(t.removeClass("active active-sm"),$("ul:first",t).slideUp(function(){n()})):(t.parent().is(".child_menu")||($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()),t.addClass("active"),$("ul:first",t).slideDown(function(){n()}))});$MENU_TOGGLE.on("click",function(){$BODY.hasClass("nav-md")?($SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")):($SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm"));$BODY.toggleClass("nav-md nav-sm");n()});$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page");$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){n()}).parent().addClass("active");$(window).smartresize(function(){n()});n();$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})});$(document).ready(function(){$(".collapse-link").on("click",function(){var n=$(this).closest(".x_panel"),i=$(this).find("i"),t=n.find(".x_content");n.attr("style")?t.slideToggle(200,function(){n.removeAttr("style")}):(t.slideToggle(200),n.css("height","auto"));i.toggleClass("fa-chevron-up fa-chevron-down")});$(".close-link").click(function(){var n=$(this).closest(".x_panel");n.remove()})});$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})});$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar();$(document).ready(function(){if($(".js-switch")[0]){var n=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));n.forEach(function(n){var t=new Switchery(n,{color:"#26B99A"})})}});$(document).ready(function(){$("input.flat")[0]&&$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})});$("table input").on("ifChecked",function(){checkState="";$(this).parent().parent().parent().addClass("selected");countChecked()});$("table input").on("ifUnchecked",function(){checkState="";$(this).parent().parent().parent().removeClass("selected");countChecked()});checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="";$(this).parent().parent().parent().addClass("selected");countChecked()});$(".bulk_action input").on("ifUnchecked",function(){checkState="";$(this).parent().parent().parent().removeClass("selected");countChecked()});$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all";countChecked()});$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none";countChecked()});$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200);$expand=$(this).find(">:first-child");$expand.text()=="+"?$expand.text("-"):$expand.text("+")})});typeof NProgress!="undefined"&&($(document).ready(function(){NProgress.start()}),$(window).load(function(){NProgress.done()}));